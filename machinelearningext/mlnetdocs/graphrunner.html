
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Input and output types &#8212; Custom Extensions to ML.net 0.8.0 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/font-awesome@4.5.0/css/font-awesome.min.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script type="text/javascript" src="https://unpkg.com/@jupyter-widgets/html-manager@^0.14.0/dist/embed-amd.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="IDataView Design Principles" href="idataviewdesignprinciples.html" />
    <link rel="prev" title="Overview" href="entrypoints.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <p>﻿# Entry Point JSON Graph format</p>
<p>The entry point graph in ML.NET is an array of <em>nodes</em>. More information about the definition of entry points and classes that help construct entry point graphs
can be found in the <a class="reference external" href="./EntryPoints.md">EntryPoint.md document</a>.</p>
<p>Each node is an object with the following fields:</p>
<ul class="simple">
<li><em>name</em>: string. Required. Name of the entry point.</li>
<li><em>inputs</em>: object. Optional. Specifies non-default inputs to the entry point.
Note that if the entry point has required inputs (which is very common), the <em>inputs</em> field is required.</li>
<li><em>outputs</em>: object. Optional. Specifies the variables that will hold the node’s outputs.</li>
</ul>
<div class="section" id="input-and-output-types">
<span id="input-and-output-types"></span><h1>Input and output types<a class="headerlink" href="#input-and-output-types" title="Permalink to this headline">¶</a></h1>
<p>The following types are supported in JSON graphs:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">string</span></code>. Represented as a JSON string, maps to a C# string.</li>
<li><code class="docutils literal notranslate"><span class="pre">float</span></code>. Represented as a JSON float, maps to a C# float or double.</li>
<li><code class="docutils literal notranslate"><span class="pre">bool</span></code>. Represented as a JSON bool, maps to a C# bool.</li>
<li><code class="docutils literal notranslate"><span class="pre">enum</span></code>. Represented as a JSON string, maps to a C# enum. The allowed values are those of the C# enum (they are also listed in the manifest).</li>
<li><code class="docutils literal notranslate"><span class="pre">int</span></code>.  Represented as a JSON integer, maps to a C# int or long.</li>
<li><code class="docutils literal notranslate"><span class="pre">array</span></code> of the above. Represented as a JSON array, maps to a C# array.</li>
<li><code class="docutils literal notranslate"><span class="pre">dictionary</span></code>. Currently not implemented. Represented as a JSON object, maps to a C# <code class="docutils literal notranslate"><span class="pre">Dictionary&lt;string,T&gt;</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">component</span></code>. Represented as a JSON object with 2 fields: <em>name</em>:string and <em>settings</em>:object.</li>
</ul>
</div>
<div class="section" id="variables">
<span id="variables"></span><h1>Variables<a class="headerlink" href="#variables" title="Permalink to this headline">¶</a></h1>
<p>The following input/output types can not be represented as a JSON value:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">IDataView</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">IFileHandle</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">ITransformModel</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">IPredictorModel</span></code></li>
</ul>
<p>These must be passed as <em>variables</em>. The variable is represented as a JSON string that begins with <code class="docutils literal notranslate"><span class="pre">$</span></code>.
Note the following rules:</p>
<ul class="simple">
<li>A variable can appear in the <em>outputs</em> only once per graph. That is, the variable can be ‘assigned’ only once.</li>
<li>If the variable is present in <em>inputs</em> of one node and in the <em>outputs</em> of another node, this signifies a graph ‘edge’.
The same variable can participate in many edges.</li>
<li>If the variable is present only in <em>inputs</em>, but never in <em>outputs</em>, it is a <em>graph input</em>. All graph inputs must be provided before
a graph can be run.</li>
<li>The variable has a type, which is the type of inputs (and, optionally, output) that it appears in. If the type of the variable is
ambiguous, ML.NET throws an exception.</li>
<li>Circular references. The experiment graph is expected to be a DAG. If the circular dependency is detected, ML.NET throws an exception.
<em>Currently, this is done lazily: if we couldn’t ever run a node because it’s waiting for inputs, we throw.</em></li>
</ul>
<div class="section" id="variables-for-arrays-and-dictionaries">
<span id="variables-for-arrays-and-dictionaries"></span><h2>Variables for arrays and dictionaries.<a class="headerlink" href="#variables-for-arrays-and-dictionaries" title="Permalink to this headline">¶</a></h2>
<p>It is allowed to define variables for arrays and dictionaries, as long as the item types are valid variable types (the four types listed above).
They are treated the same way as regular ‘scalar’ variables.</p>
<p>If we want to reference an item of the collection, we can use the <code class="docutils literal notranslate"><span class="pre">[]</span></code> syntax:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">$var[5]</span></code> denotes 5th element of an array variable.</li>
<li><code class="docutils literal notranslate"><span class="pre">$var[foo]</span></code> and <code class="docutils literal notranslate"><span class="pre">$var['foo']</span></code> both denote the element with key ‘foo’ of a dictionary variable.
<em>This is not yet implemented.</em></li>
</ul>
<p>Conversely, if we want to build a collection (array or dictionary) of variables, we can do it using JSON arrays and objects:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">[&quot;$v1&quot;,</span> <span class="pre">&quot;$v2&quot;,</span> <span class="pre">&quot;$v3&quot;]</span></code> denotes an array containing 3 variables.</li>
<li><code class="docutils literal notranslate"><span class="pre">{&quot;foo&quot;:</span> <span class="pre">&quot;$v1&quot;,</span> <span class="pre">&quot;bar&quot;:</span> <span class="pre">&quot;$v2&quot;}</span></code> denotes a collection containing 2 key-value pairs.
<em>This is also not yet implemented.</em></li>
</ul>
</div>
</div>
<div class="section" id="example-of-a-json-entry-point-manifest-object-and-the-respective-entry-point-graph-node">
<span id="example-of-a-json-entry-point-manifest-object-and-the-respective-entry-point-graph-node"></span><h1>Example of a JSON entry point manifest object, and the respective entry point graph node<a class="headerlink" href="#example-of-a-json-entry-point-manifest-object-and-the-respective-entry-point-graph-node" title="Permalink to this headline">¶</a></h1>
<p>Let’s consider the following manifest snippet, describing an entry point <em>‘CVSplit.Split’</em>:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>    <span class="p">{</span>
      <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;CVSplit.Split&quot;</span><span class="p">,</span>
      <span class="s2">&quot;desc&quot;</span><span class="o">:</span> <span class="s2">&quot;Split the dataset into the specified number of cross-validation folds (train and test sets)&quot;</span><span class="p">,</span>
      <span class="s2">&quot;inputs&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Data&quot;</span><span class="p">,</span>
          <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;DataView&quot;</span><span class="p">,</span>
          <span class="s2">&quot;desc&quot;</span><span class="o">:</span> <span class="s2">&quot;Input dataset&quot;</span><span class="p">,</span>
          <span class="s2">&quot;required&quot;</span><span class="o">:</span> <span class="kc">true</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;NumFolds&quot;</span><span class="p">,</span>
          <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Int&quot;</span><span class="p">,</span>
          <span class="s2">&quot;desc&quot;</span><span class="o">:</span> <span class="s2">&quot;Number of folds to split into&quot;</span><span class="p">,</span>
          <span class="s2">&quot;required&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
          <span class="s2">&quot;default&quot;</span><span class="o">:</span> <span class="mi">2</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;StratificationColumn&quot;</span><span class="p">,</span>
          <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;String&quot;</span><span class="p">,</span>
          <span class="s2">&quot;desc&quot;</span><span class="o">:</span> <span class="s2">&quot;Stratification column&quot;</span><span class="p">,</span>
          <span class="s2">&quot;aliases&quot;</span><span class="o">:</span> <span class="p">[</span>
            <span class="s2">&quot;strat&quot;</span>
          <span class="p">],</span>
          <span class="s2">&quot;required&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
          <span class="s2">&quot;default&quot;</span><span class="o">:</span> <span class="kc">null</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="s2">&quot;outputs&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;TrainData&quot;</span><span class="p">,</span>
          <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;kind&quot;</span><span class="o">:</span> <span class="s2">&quot;Array&quot;</span><span class="p">,</span>
            <span class="s2">&quot;itemType&quot;</span><span class="o">:</span> <span class="s2">&quot;DataView&quot;</span>
          <span class="p">},</span>
          <span class="s2">&quot;desc&quot;</span><span class="o">:</span> <span class="s2">&quot;Training data (one dataset per fold)&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;TestData&quot;</span><span class="p">,</span>
          <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;kind&quot;</span><span class="o">:</span> <span class="s2">&quot;Array&quot;</span><span class="p">,</span>
            <span class="s2">&quot;itemType&quot;</span><span class="o">:</span> <span class="s2">&quot;DataView&quot;</span>
          <span class="p">},</span>
          <span class="s2">&quot;desc&quot;</span><span class="o">:</span> <span class="s2">&quot;Testing data (one dataset per fold)&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>As we can see, the entry point has 3 inputs (one of them required), and 2 outputs.
The following is a correct graph containing call to this entry point:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;nodes&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;CVSplit.Split&quot;</span><span class="p">,</span>
      <span class="s2">&quot;inputs&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;Data&quot;</span><span class="o">:</span> <span class="s2">&quot;$data1&quot;</span>
      <span class="p">},</span>
      <span class="s2">&quot;outputs&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;TrainData&quot;</span><span class="o">:</span> <span class="s2">&quot;$cv&quot;</span>
      <span class="p">}</span>
    <span class="p">}]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/project_ico.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../index.html">Custom Extensions to ML.net</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dataframe.html">DataFrames in C#</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commandline.html">Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../components/index.html">ML.net Components</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../machinelearning_docs.html">ML.net details</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">ML.net details</a></li>
<li class="toctree-l2"><a class="reference internal" href="changes.html">ML.net releases details</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../concepts.html">Scikit.ML details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apicsharpdoc.html">CSharp API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aonnx.html">ML.net and ONNX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../incompatibilities.html">ML.net customization</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../machinelearning_docs.html">ML.net details</a><ul>
  <li><a href="index.html">ML.net details</a><ul>
      <li>Previous: <a href="entrypoints.html" title="previous chapter">Overview</a></li>
      <li>Next: <a href="idataviewdesignprinciples.html" title="next chapter">IDataView Design Principles</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/mlnetdocs/graphrunner.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>