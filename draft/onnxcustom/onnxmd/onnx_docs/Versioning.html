
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>ONNX Versioning &#8212; onnxcustom</title>
    
    <link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
  
    
    <link rel="stylesheet"
      href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">
  
    
      
  
    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/pydata-sphinx-theme.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/style_notebook_snippet.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinxtrib-images/LightBox2/lightbox2/css/lightbox.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/my-styles.css" />
    
    <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">
  
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/thebelab-helper.js"></script>
    <script src="../../_static/require.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
    <script src="../../_static/sphinxtrib-images/LightBox2/lightbox2/js/jquery-1.11.0.min.js"></script>
    <script src="../../_static/sphinxtrib-images/LightBox2/lightbox2/js/lightbox.min.js"></script>
    <script src="../../_static/sphinxtrib-images/LightBox2/lightbox2_customize/jquery-noconflict.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../../index.html">
  <img src="../../_static/project_ico.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../tutorials/index.html">
  Tutorials
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../api/apis.html">
  API
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../gyexamples/index.html">
  Examples Gallery
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../all_notebooks.html">
  Notebooks Gallery
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../other_pages.html">
  Other pages
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../blog/blogindex.html">
  Blog Gallery
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Overview.html">
   Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="IR.html">
   Open Neural Network Exchange Intermediate Representation (ONNX IR) Specification
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="PythonAPIOverview.html">
   Python API Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="OpConventions.html">
   Operator Conventions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="DimensionDenotation.html">
   Dimension Denotation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Broadcasting.html">
   Broadcasting in ONNX
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ExternalData.html">
   External Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Hub.html">
   ONNX Model Hub
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../onnx_metadata.html">
   Metatdata
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ShapeInference.html">
   ONNX Shape Inference
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="CIPipelines.html">
   ONNX CI Pipelines
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Syntax.html">
   Overview
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   ONNX Versioning
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="VersionConverter.html">
   ONNX Version Converter
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Relicensing.html">
   Relicensing MIT to Apache-2.0
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../onnx_releases.html">
   Onnx Releases
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../onnx_operators.html">
   ONNX Operators
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../onnx_operators_ml.html">
   ONNX ML Operators
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../onnx_changelog.html">
   Change Logs
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../onnx_changelog_ml.html">
   ML Change Logs
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../onnx_test_coverage.html">
   Test Coverage (Operators)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../onnx_test_coverage_ml.html">
   Test Coverage (ML Operators)
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../onnx_contributing.html">
   Contributing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../onnx_add_new_op.html">
   Adding a new operator
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ImplementingAnOnnxBackend.html">
   Implementing an ONNX backend
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="OnnxBackendTest.html">
   ONNX Backend Test
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../onnx_managing.html">
   Onnx Releases
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ONNXIFI.html">
   ONNX Interface for Framework Integration (ONNXIFI)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ONNXTypes.html">
   Optional Type
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="TypeAnnotations.html">
   Type annotations for ONNX
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="TypeDenotation.html">
   Type Denotation
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="DefineDifferentiability.html">
   A Short Guide on the Differentiability Tag for ONNX Operators
  </a>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#versioning-principles">
   Versioning Principles
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#semantic-versioning-or-simple-numbers">
     Semantic Versioning or Simple Numbers?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#semver-files-and-consumers">
     SemVer, Files and Consumers
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#serializing-semver-version-numbers-in-protobuf">
     Serializing SemVer version numbers in protobuf
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ir-versioning">
   IR versioning
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#operator-versioning">
   Operator versioning
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#operator-sets">
     Operator sets
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example">
     Example
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#model-versioning">
   Model versioning
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#signature-changes">
     Signature Changes
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#accuracy-or-performance-changes">
     Accuracy or performance changes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#released-versions">
   Released Versions
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <!--- SPDX-License-Identifier: Apache-2.0 -->
<section id="onnx-versioning">
<h1>ONNX Versioning<a class="headerlink" href="#onnx-versioning" title="Permalink to this headline">¶</a></h1>
<p>This document describes the rules for versioning ONNX. MUST, SHOULD et al are used consistent with <a class="reference external" href="https://tools.ietf.org/html/rfc2119">RFC2119</a>.</p>
<section id="versioning-principles">
<h2>Versioning Principles<a class="headerlink" href="#versioning-principles" title="Permalink to this headline">¶</a></h2>
<p>ONNX defines the versioning policy and mechanism for three classes of entities:</p>
<ul class="simple">
<li><p>The <a class="reference internal" href="IR.html"><span class="doc std std-doc">intermediate representation (IR) specification</span></a>, which is the abstract model for graphs and operators and the concrete format that represents them. These are always versioned atomically and are referred to as the <em>IR version</em>.</p></li>
<li><p>Operator specifications that may be referenced by a given ONNX graph. We refer to this as the <em>operator version</em>.</p></li>
<li><p>A defined/trained model that defines a specific graph in terms of specific operators. We refer to this as the <em>model version</em>.</p></li>
</ul>
<p>The versioning of all three of these entity types is distinct and largely independent. The IR specification evolves at a different (generally slower) rate than the operator specifications. Model versions are entirely independent of the other two versions.</p>
<p>Specific policies for version management are mandated only for IR version and operator version. For model versioning, they are merely recommendations. For model versioning, ONNX users and systems MAY follow whichever local customs make sense; however, to facilitate easily managing shared collections of ONNX models, they SHOULD adhere to the policies described under model versioning.</p>
<p>New IR and operator versions are released as part of ONNX <em>releases</em>, which have their own versioning scheme. The release versioning scheme is not described as part of the standard itself. It is discussed in the <span class="xref myst">ONNX release management document</span>.</p>
<section id="semantic-versioning-or-simple-numbers">
<h3>Semantic Versioning or Simple Numbers?<a class="headerlink" href="#semantic-versioning-or-simple-numbers" title="Permalink to this headline">¶</a></h3>
<p>The ONNX versioning system allows for simple monotonically increasing numbers or <a class="reference external" href="https://semver.org/">semantic versioning (SemVer)</a>. For IR and operator sets, versioning is based on simple numbers. For models, ONNX does not require any scheme, but recommends a set of shared conventions.</p>
<p>Which versioning scheme is in use by a model is made clear by inspecting the most significant four bytes, which MUST be non-zero when using semantic versioning and MUST be zero when using simple numbers. In other words, when using SemVer, at least one of the MAJOR or MINOR numbers must be non-zero.</p>
</section>
<section id="semver-files-and-consumers">
<h3>SemVer, Files and Consumers<a class="headerlink" href="#semver-files-and-consumers" title="Permalink to this headline">¶</a></h3>
<p>For model and release versioning, ONNX builds on the principles and syntax defined by <a class="reference external" href="http://semver.org/spec/v2.0.0.html">SemVer 2.0.0</a>. Throughout this document, we use the terms <em>breaking change</em>, <em>non-breaking change</em>, and <em>patch</em> consistent with SemVer 2.0.0.</p>
<p>Because ONNX models are serialized files (not APIs), it’s worth making clear the relationship between a serialized model and a piece of software that consumes that model. As a rough approximation, the serialized model plays the role of an API’s <em>callee</em>, while the consumer of the serialized model plays the role of the API’s <em>caller</em>.</p>
<p>The ONNX versioning principles are based on the <a class="reference external" href="https://en.wikipedia.org/wiki/Robustness_principle">robustness principle</a>: “be conservative in what you do, be liberal in what you accept from others”.</p>
<ol class="arabic simple">
<li><p>A producer of a given ONNX model (and the ONNX specification itself) MUST strictly adhere to the rules for breaking vs. non-breaking changes defined in this specification.</p></li>
<li><p>A consumer of a given ONNX model SHOULD consume an updated ONNX file, provided there are no breaking changes in the new ONNX file’s IR version, referenced operator versions, or model version (meaning the MAJOR version numbers have not changed between the two ONNX files).</p></li>
<li><p>A consumer of a given ONNX model MAY consume an updated ONNX file, provided there are one or more breaking changes in the new ONNX file’s IR version, referenced operator versions, or model version.</p></li>
</ol>
</section>
<section id="serializing-semver-version-numbers-in-protobuf">
<h3>Serializing SemVer version numbers in protobuf<a class="headerlink" href="#serializing-semver-version-numbers-in-protobuf" title="Permalink to this headline">¶</a></h3>
<p>For efficiency, ONNX serializes the MAJOR, MINOR, and PATCH values as a bit-packed 64-bit integer; the two most significant bytes are the MAJOR component, the next two most significant bytes are the MINOR component, and the least significant four bytes are the PATCH component.</p>
<p>For example, <em>1.2.345</em> is represented as <em>0x0001000200000159</em>.</p>
<p>Pre-release and build metadata are not stored in the model.</p>
</section>
</section>
<section id="ir-versioning">
<h2>IR versioning<a class="headerlink" href="#ir-versioning" title="Permalink to this headline">¶</a></h2>
<p>The IR format is versioned using simple numbers, which MUST be monotonically increasing. Breaking changes to the format or semantics of the ONNX specification require an increment of the version. Non-breaking changes to the IR format do not require changing the version number.</p>
<p>NOTE: breaking changes include those that do not alter the serialized binary format, but still break software using libraries that write or read it. For example, changing the spelling of a message property will cause code accessing the property break.</p>
<p>The IR format adheres to the versioning guidelines defined in the <a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto3#updating">Updating a Message Type</a> section of the proto3 specification.</p>
<p>As a general principle, implementations SHOULD be robust in the face of missing fields. However, to ensure basic interoperation, a subset of message fields will be marked as required for a given IR version and all producers MUST set these fields correctly. Required fields MUST always be marked with the comment:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>// This field MUST be present for this version of the IR.
</pre></div>
</div>
<p>For example, the <code class="docutils literal notranslate"><span class="pre">ModelProto.ir_version</span></code> property MUST be present in every model. The ONNX checker (<code class="docutils literal notranslate"><span class="pre">onnx/checker.py</span></code>) will enforce these rules.</p>
<p>Because the protocol buffer message definitions (.proto / .proto3 files) are expected to be consumed by multiple independent developers, changes to those definitions SHOULD NOT break code that depends on generated language bindings (e.g., changing the type of an existing field).</p>
</section>
<section id="operator-versioning">
<h2>Operator versioning<a class="headerlink" href="#operator-versioning" title="Permalink to this headline">¶</a></h2>
<p>The IR can evolve independently from the set of operators. Operators represent both the signature and semantics of a given operation. Operators are abstract interfaces in that they do not imply a specific implementation; rather, they are simply the contract between a model author and the implementations that model may execute on.</p>
<p>A given operator is identified by a three-tuple: <code class="docutils literal notranslate"><span class="pre">(domain,</span> <span class="pre">op_type,</span> <span class="pre">since_version)</span></code>, written as <code class="docutils literal notranslate"><span class="pre">domain.op_type:since_version</span></code> in prose (e.g., <code class="docutils literal notranslate"><span class="pre">com.acme.FastConv:3</span></code>). <code class="docutils literal notranslate"><span class="pre">since_version</span></code> is the version of the operator set that introduced the operator. Breaking operator changes include:</p>
<ul class="simple">
<li><p>Adding/removing/renaming an attribute. This even includes the case of adding a new optional attribute, where omitting the attribute would imply a default value yielding semantics identical to the previous operator version.</p></li>
<li><p>Adding/removing/reordering inputs or outputs.</p></li>
<li><p>Adding/removing types supported by inputs and outputs, and changing types used by attributes.</p></li>
<li><p>Supporting new behavior even when the existing parameter signature is otherwise identical (e.g. implicitly supporting tensor broadcasting in the Mean operator).</p></li>
</ul>
<p>The following are not breaking:</p>
<ul class="simple">
<li><p>Clarifications of specification ambiguities to match prevailing
implementation practice.</p></li>
</ul>
<p>Changes to the semantics of an operator or function MUST be introduced in a new operator, which MUST be introduced in a new <span class="xref myst">operator set</span>.</p>
<blockquote>
<div><p>In practice, this means that BC-breaking changes in the ONNX
repository require contributors to follow these steps:</p>
<ol class="arabic simple">
<li><p>Increment the maximum version in <code class="docutils literal notranslate"><span class="pre">DomainToVersionRange</span></code>.</p></li>
<li><p>Copy the old operator schema to an <code class="docutils literal notranslate"><span class="pre">old.cc</span></code> file.</p></li>
<li><p>Update the <code class="docutils literal notranslate"><span class="pre">SinceVersion</span></code> signifier to the new max version from
step (1).</p></li>
<li><p>Register the new operator in the corresponding <code class="docutils literal notranslate"><span class="pre">operator_sets</span></code>
header file.</p></li>
<li><p>Add a version adapter to <code class="docutils literal notranslate"><span class="pre">convert.h</span></code> so that the version
converter can upgrade the old version of the operator to the new
one. This can be a <code class="docutils literal notranslate"><span class="pre">CompatibleAdapter</span></code> in case operators following
the old schema are still valid under the new one (which is usually
true).</p></li>
<li><p>A version adapter to downgrade the new operator to the older version
can also be added to <code class="docutils literal notranslate"><span class="pre">convert.h</span></code> but it’s not mandatory.</p></li>
</ol>
</div></blockquote>
<p>How nodes bind to operator declarations is strictly defined, and are designed to increase model compatibility across ONNX implementations, in the spirit of the conservative clause of the robustness principle.</p>
<p>How ONNX implementations bind an operator declaration to a specific implementation is outside the scope of this specification. Implementations of ONNX MAY elect to introduce more sophisticated operator declaration/implementation binding modes, in the spirit of the liberal clause of the robustness principle.</p>
<section id="operator-sets">
<h3>Operator sets<a class="headerlink" href="#operator-sets" title="Permalink to this headline">¶</a></h3>
<p>ONNX uses operator sets to group together immutable operator specifications. An operator set represents a specific version of a domain, indicated by a pair (domain, version). This represents the set of all operators belonging to the specified domain with the specified version (referred to as the <code class="docutils literal notranslate"><span class="pre">opset_version</span></code>). When the inventory of a given operator set changes either by addition, removal, or a change in semantics of a contained operator, its version MUST increase.</p>
<p>Models declare which operator sets they require as a list of <code class="docutils literal notranslate"><span class="pre">(domain,</span> <span class="pre">opset_version)</span></code> pairs in <code class="docutils literal notranslate"><span class="pre">ModelProto.opset_import</span></code>. The empty string (“”) domain indicates the operators defined as part of the ONNX specification; other domains correspond to operator sets of other vendors (meaning they can be used to provide vendor-specific extensions to ONNX). The union of the operator sets specified by a given model MUST have a compatible operator declaration for each node in the model’s graph.</p>
</section>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<p>This section is not normative and informational only.</p>
<p>Given the following operator sets:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>OpSet</p></th>
<th class="head"><p>Operators</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>{A}</p></td>
<td><p>A introduced</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>{A, B}</p></td>
<td><p>B introduced</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>{A’, B, C}</p></td>
<td><p>A updated (to A’), C introduced</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>{B, C’}</p></td>
<td><p>A removed, C updated (to C’)</p></td>
</tr>
</tbody>
</table>
<p>The operators for a given operator set will have the following <code class="docutils literal notranslate"><span class="pre">since_version</span></code> values:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Operator</p></th>
<th class="head"><p>OpSet 1</p></th>
<th class="head"><p>OpSet 2</p></th>
<th class="head"><p>OpSet 3</p></th>
<th class="head"><p>OpSet 4</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>A</p></td>
<td><p><strong>1</strong></p></td>
<td><p>1</p></td>
<td><p><strong>3</strong></p></td>
<td><p><strong>-</strong></p></td>
</tr>
<tr class="row-odd"><td><p>B</p></td>
<td><p>-</p></td>
<td><p><strong>2</strong></p></td>
<td><p>2</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>C</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p><strong>3</strong></p></td>
<td><p><strong>4</strong></p></td>
</tr>
</tbody>
</table>
<p>Notes:</p>
<ul class="simple">
<li><p>Values that are new or updated from a previous OpSet version are in <strong>bold</strong>.</p></li>
</ul>
</section>
</section>
<section id="model-versioning">
<h2>Model versioning<a class="headerlink" href="#model-versioning" title="Permalink to this headline">¶</a></h2>
<p>This section of the specification is not normative. It simply outlines a set of recommended practices.</p>
<p>Model authors and applications/systems MAY elect to ignore the model versioning mechanism and policy rules. For models that will be shared across developers, teams, or organizations, model authors and applications/systems SHOULD adhere to the following version policies:</p>
<section id="signature-changes">
<h3>Signature Changes<a class="headerlink" href="#signature-changes" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>Breaking changes to the ModelProto.graph.GraphProto.input or .output MUST increment the MAJOR version of <code class="docutils literal notranslate"><span class="pre">ModelProto.model_version</span></code>. Breaking changes include:</p>
<ul class="simple">
<li><p>Breaking changes to the semantics of an input or output (e.g., changing the required contents of an input tensor from a color image to a black and white image).</p></li>
<li><p>Changing the declared type of an input or output to an incompatible type (e.g., <code class="docutils literal notranslate"><span class="pre">tensor(int)-&gt;tensor(string)</span></code>).</p></li>
<li><p>Adding a new input for which there is no meaningful or specified default value. Recall that default values for inputs are specified in the initializer list.</p></li>
<li><p>Removing an existing output for which there is no meaningful or specified default value.</p></li>
</ul>
</li>
<li><p>Non-breaking changes to the ModelProto.graph.GraphProto.input or .output MUST increment the MINOR version of <code class="docutils literal notranslate"><span class="pre">ModelProto.model_version</span></code>. Non-breaking changes include:</p>
<ul class="simple">
<li><p>Changing the declared type of an input or output to a compatible/widening type (e.g., <code class="docutils literal notranslate"><span class="pre">tensor(int32)-&gt;tensor(int64)</span></code>, <code class="docutils literal notranslate"><span class="pre">tensor(float16)-&gt;tensor(float32)</span></code>).</p></li>
<li><p>Adding a new input for which there is a meaningful or specified default value.</p></li>
<li><p>Adding new behavior that is only triggered in the presence of inputs that were not
possible in prior versions of the graph (typically by the presence of a new input
or allowing a previously invalid input value).</p></li>
</ul>
</li>
</ol>
</section>
<section id="accuracy-or-performance-changes">
<h3>Accuracy or performance changes<a class="headerlink" href="#accuracy-or-performance-changes" title="Permalink to this headline">¶</a></h3>
<p>Changes that impact accuracy or performance significantly but do not change the model’s inputs or outputs SHOULD increment the PATCH version of <code class="docutils literal notranslate"><span class="pre">ModelProto.model_version</span></code>.</p>
</section>
</section>
<section id="released-versions">
<h2>Released Versions<a class="headerlink" href="#released-versions" title="Permalink to this headline">¶</a></h2>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>ONNX version</p></th>
<th class="head"><p>IR version</p></th>
<th class="head"><p>Opset version ai.onnx</p></th>
<th class="head"><p>Opset version ai.onnx.ml</p></th>
<th class="head"><p>Opset version ai.onnx.training</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1.0</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>1.1</p></td>
<td><p>3</p></td>
<td><p>5</p></td>
<td><p>1</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>1.1.2</p></td>
<td><p>3</p></td>
<td><p>6</p></td>
<td><p>1</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>1.2</p></td>
<td><p>3</p></td>
<td><p>7</p></td>
<td><p>1</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>1.3</p></td>
<td><p>3</p></td>
<td><p>8</p></td>
<td><p>1</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>1.4.1</p></td>
<td><p>4</p></td>
<td><p>9</p></td>
<td><p>1</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>1.5.0</p></td>
<td><p>5</p></td>
<td><p>10</p></td>
<td><p>1</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>1.6.0</p></td>
<td><p>6</p></td>
<td><p>11</p></td>
<td><p>2</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>1.7.0</p></td>
<td><p>7</p></td>
<td><p>12</p></td>
<td><p>2</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>1.8.0</p></td>
<td><p>7</p></td>
<td><p>13</p></td>
<td><p>2</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>1.8.1</p></td>
<td><p>7</p></td>
<td><p>13</p></td>
<td><p>2</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>1.9.0</p></td>
<td><p>7</p></td>
<td><p>14</p></td>
<td><p>2</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>1.10.0</p></td>
<td><p>8</p></td>
<td><p>15</p></td>
<td><p>2</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>1.10.1</p></td>
<td><p>8</p></td>
<td><p>15</p></td>
<td><p>2</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>1.10.2</p></td>
<td><p>8</p></td>
<td><p>15</p></td>
<td><p>2</p></td>
<td><p>1</p></td>
</tr>
</tbody>
</table>
<p>A programmatically accessible version of the above table is available <span class="xref myst">here</span>. Limited version number
information is also maintained in <span class="xref myst">version.h</span> and <span class="xref myst">schema.h</span>.
Please update all whenever a new version of ONNX is released.</p>
</section>
</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
              
          </main>
          

      </div>
    </div>
  
    <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022, Xavier Dupré.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.4.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>