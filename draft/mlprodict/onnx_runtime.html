
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Runtimes for ONNX &#8212; Python Runtime for ONNX</title>
    
    <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
  
    
    <link rel="stylesheet"
      href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">
  
    
      
  
    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/pydata-sphinx-theme.css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="_static/style_notebook_snippet.css" />
    <link rel="stylesheet" type="text/css" href="_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinxtrib-images/LightBox2/lightbox2/css/lightbox.css" />
    <link rel="stylesheet" type="text/css" href="_static/my-styles.css" />
    
    <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">
  
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/thebelab-helper.js"></script>
    <script src="_static/require.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
    <script src="_static/sphinxtrib-images/LightBox2/lightbox2/js/jquery-1.11.0.min.js"></script>
    <script src="_static/sphinxtrib-images/LightBox2/lightbox2/js/lightbox.min.js"></script>
    <script src="_static/sphinxtrib-images/LightBox2/lightbox2_customize/jquery-noconflict.js"></script>
    <link rel="shortcut icon" href="_static/project_ico.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="ONNX Backends" href="backends/index.html" />
    <link rel="prev" title="ONNX, Runtime, Backends" href="onnx.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="index.html">
  <img src="_static/project_ico.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="installation.html">
  Installation
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="tutorial/index.html">
  Tutorial
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="api/index.html">
  API
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="onnx.html">
  ONNX, Runtime, Backends
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="onnx_bench.html">
  scikit-learn Converters and Benchmarks
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="i_cmd.html">
  Command lines
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="i_ex.html">
  Examples
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="i_index.html">
  FAQ, code, …
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="gyexamples/index.html">
  Gallery of examples
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="all_notebooks.html">
  Notebook Gallery
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="HISTORY.html">
  History
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Runtimes for ONNX
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="backends/index.html">
   ONNX Backends
  </a>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#python-runtime-python">
   Python Runtime = ‘python’
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#python-compiled">
   python_compiled
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#onnxruntime1">
   onnxruntime1
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#onnxruntime2-independent-onnxruntime-for-every-node">
   onnxruntime2: independent onnxruntime for every node
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="runtimes-for-onnx">
<span id="l-onnx-runtimes"></span><h1>Runtimes for ONNX<a class="headerlink" href="#runtimes-for-onnx" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#python-runtime-python" id="id1">Python Runtime = ‘python’</a></p></li>
<li><p><a class="reference internal" href="#python-compiled" id="id2">python_compiled</a></p></li>
<li><p><a class="reference internal" href="#onnxruntime1" id="id3">onnxruntime1</a></p></li>
<li><p><a class="reference internal" href="#onnxruntime2-independent-onnxruntime-for-every-node" id="id4">onnxruntime2: independent onnxruntime for every node</a></p></li>
</ul>
</div>
<section id="python-runtime-python">
<span id="l-onnx-pyrun-tbl"></span><h2><a class="toc-backref" href="#id1">Python Runtime = ‘python’</a><a class="headerlink" href="#python-runtime-python" title="Permalink to this headline">¶</a></h2>
<p>This module implements a python runtime for <a class="reference external" href="https://onnx.ai/">ONNX</a>.
It is a work constantly in progress. It was started to
facilitate the implementation of <a class="reference external" href="https://scikit-learn.org/stable/">scikit-learn</a>
converters in <a class="reference external" href="https://github.com/onnx/sklearn-onnx">sklearn-onnx</a>.
Main class is <a class="reference internal" href="mlprodict/onnxrt/onnx_inference.html#mlprodict.onnxrt.onnx_inference.OnnxInference" title="mlprodict.onnxrt.onnx_inference.OnnxInference"><code class="xref py py-class docutils literal notranslate"><span class="pre">OnnxInference</span></code></a>.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LinearRegression</span>
<span class="kn">from</span> <span class="nn">sklearn.datasets</span> <span class="kn">import</span> <span class="n">load_iris</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">mlprodict.onnxrt</span> <span class="kn">import</span> <span class="n">OnnxInference</span>
<span class="kn">from</span> <span class="nn">mlprodict.onnx_conv</span> <span class="kn">import</span> <span class="n">to_onnx</span>

<span class="n">iris</span> <span class="o">=</span> <span class="n">load_iris</span><span class="p">()</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">iris</span><span class="o">.</span><span class="n">target</span>
<span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="n">clr</span> <span class="o">=</span> <span class="n">LinearRegression</span><span class="p">()</span>
<span class="n">clr</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>

<span class="c1"># predictions with scikit-learn</span>
<span class="n">exp</span> <span class="o">=</span> <span class="n">clr</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">[:</span><span class="mi">5</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">exp</span><span class="p">)</span>

<span class="c1"># predictions with onnxruntime</span>
<span class="n">model_def</span> <span class="o">=</span> <span class="n">to_onnx</span><span class="p">(</span><span class="n">clr</span><span class="p">,</span> <span class="n">X_train</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
                    <span class="n">target_opset</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="n">oinf</span> <span class="o">=</span> <span class="n">OnnxInference</span><span class="p">(</span><span class="n">model_def</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">oinf</span><span class="o">.</span><span class="n">run</span><span class="p">({</span><span class="s1">&#39;X&#39;</span><span class="p">:</span> <span class="n">X_test</span><span class="p">[:</span><span class="mi">5</span><span class="p">]})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="p">[</span><span class="o">-</span><span class="mf">0.023</span>  <span class="mf">1.436</span>  <span class="mf">1.132</span>  <span class="mf">1.6</span>    <span class="mf">1.755</span><span class="p">]</span>
    <span class="p">{</span><span class="s1">&#39;variable&#39;</span><span class="p">:</span> <span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mf">0.023</span><span class="p">],</span>
           <span class="p">[</span> <span class="mf">1.436</span><span class="p">],</span>
           <span class="p">[</span> <span class="mf">1.132</span><span class="p">],</span>
           <span class="p">[</span> <span class="mf">1.6</span>  <span class="p">],</span>
           <span class="p">[</span> <span class="mf">1.755</span><span class="p">]])}</span>
</pre></div>
</div>
<p>Some <a class="reference external" href="https://onnx.ai/">ONNX</a> operators converters are using were not all
available in older version of <a class="reference external" href="https://onnx.ai/">ONNX</a>. This version is called
<em>opset number</em>. <a class="reference external" href="https://onnx.ai/">ONNX</a> 1.4.0 is opset 9,
<a class="reference external" href="https://onnx.ai/">ONNX</a> 1.5.0 is opset 10…
Next table shows which operator is available in which opset.
An empty cell means it is not available. Other cells
contains concatenated flags whose meaning is the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ERROR</span></code> means the automated process failed to give
a appropriate status or the runtime produces predictions
too far from the original predictions,
the second part of the constant gives an
approximate diagnostic, last columns gives the exception
message,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OK</span></code>: the converter works fine and the runtime produces
predictions almost equal to the orignal predictions,
relative difference is below <img class="math" src="_images/math/a916c8ac056aa295947fb9b40a4b85ede56c0b65.svg" alt="1e-5"/>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">e&lt;%f</span></code>: the converter works fine and the runtime produces
predictions close to the orignal predictions,
relative difference is below the threshold,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">i/j</span></code>: the model was converted for a specific opset but
the converted ONNX is compatible with smaller opset,
<em>i</em> is the smallest compatible opset for the main domain,
<em>j</em> is the smallest compatible opset for the ai domain,</p></li>
</ul>
<p>The model are tested through simple problems using the Iris dataset.
The datasets is split into train test datasets.
Function <a class="reference internal" href="mlprodict/onnxrt/validate/validate_problems.html#mlprodict.onnxrt.validate.validate_problems.find_suitable_problem" title="mlprodict.onnxrt.validate.validate_problems.find_suitable_problem"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_suitable_problem</span></code></a> gives
the list of problem every <a class="reference external" href="https://scikit-learn.org/stable/">scikit-learn</a> is tested on.
The main ones are the following:</p>
<ul class="simple">
<li><p><em>b-cm</em>: binary classification,</p></li>
<li><p><em>m-cl</em>: multi-class classification,</p></li>
<li><p><em>reg</em>: regression,</p></li>
<li><p><em>cluster</em>: clutering,</p></li>
<li><p><em>outlier</em>: outlier detection,</p></li>
<li><p><em>num-tr</em>: no label, only numerical features</p></li>
</ul>
<p>The full list is given by <a class="reference internal" href="mlprodict/onnxrt/validate/validate_problems.html#mlprodict.onnxrt.validate.validate_problems.find_suitable_problem" title="mlprodict.onnxrt.validate.validate_problems.find_suitable_problem"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_suitable_problem</span></code></a>.
Next table tracks what is available,
what is working and some indication about
the cause of the error if it does not work.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">logging</span> <span class="kn">import</span> <span class="n">getLogger</span>
<span class="kn">from</span> <span class="nn">pyquickhelper.loghelper</span> <span class="kn">import</span> <span class="n">noLOG</span>
<span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="n">DataFrame</span>
<span class="kn">from</span> <span class="nn">pyquickhelper.pandashelper</span> <span class="kn">import</span> <span class="n">df2rst</span>
<span class="kn">from</span> <span class="nn">sklearn.exceptions</span> <span class="kn">import</span> <span class="n">ConvergenceWarning</span>
<span class="kn">from</span> <span class="nn">sklearn.utils._testing</span> <span class="kn">import</span> <span class="n">ignore_warnings</span>
<span class="kn">from</span> <span class="nn">mlprodict.onnxrt.validate</span> <span class="kn">import</span> <span class="n">enumerate_validated_operator_opsets</span><span class="p">,</span> <span class="n">summary_report</span>


<span class="nd">@ignore_warnings</span><span class="p">(</span><span class="n">category</span><span class="o">=</span><span class="p">(</span><span class="ne">UserWarning</span><span class="p">,</span> <span class="n">ConvergenceWarning</span><span class="p">,</span> <span class="ne">RuntimeWarning</span><span class="p">,</span> <span class="ne">FutureWarning</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">build_table</span><span class="p">():</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;skl2onnx&#39;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">enumerate_validated_operator_opsets</span><span class="p">(</span>
        <span class="mi">0</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fLOG</span><span class="o">=</span><span class="n">noLOG</span><span class="p">,</span>
        <span class="n">models</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;LinearRegression&#39;</span><span class="p">,</span> <span class="s1">&#39;LogisticRegression&#39;</span><span class="p">],</span>
        <span class="n">benchmark</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
    <span class="n">piv</span> <span class="o">=</span> <span class="n">summary_report</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;ERROR-msg&quot;</span> <span class="ow">in</span> <span class="n">piv</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">shorten</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
            <span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">75</span><span class="p">:</span>
                <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="p">[:</span><span class="mi">75</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;...&quot;</span>
            <span class="k">return</span> <span class="n">text</span>

        <span class="n">piv</span><span class="p">[</span><span class="s2">&quot;ERROR-msg&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">piv</span><span class="p">[</span><span class="s2">&quot;ERROR-msg&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">shorten</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">df2rst</span><span class="p">(</span><span class="n">piv</span><span class="p">,</span> <span class="n">number_format</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                 <span class="n">replacements</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;nan&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;ERR: 4convert&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">}))</span>


<span class="n">build_table</span><span class="p">()</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<table class="table">
<colgroup>
<col style="width: 3%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 6%" />
<col style="width: 3%" />
<col style="width: 2%" />
<col style="width: 10%" />
<col style="width: 7%" />
<col style="width: 2%" />
<col style="width: 1%" />
<col style="width: 2%" />
<col style="width: 1%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 1%" />
<col style="width: 2%" />
<col style="width: 1%" />
<col style="width: 1%" />
<col style="width: 1%" />
<col style="width: 1%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>name</p></th>
<th class="head"><p>problem</p></th>
<th class="head"><p>scenario</p></th>
<th class="head"><p>optim</p></th>
<th class="head"><p>method_name</p></th>
<th class="head"><p>output_index</p></th>
<th class="head"><p>conv_options</p></th>
<th class="head"><p>inst</p></th>
<th class="head"><p>n_features</p></th>
<th class="head"><p>runtime</p></th>
<th class="head"><p>skl_version</p></th>
<th class="head"><p>skl_nop</p></th>
<th class="head"><p>skl_ncoef</p></th>
<th class="head"><p>skl_nlin</p></th>
<th class="head"><p>onx_size</p></th>
<th class="head"><p>onx_nnodes</p></th>
<th class="head"><p>onx_ninits</p></th>
<th class="head"><p>onx_producer_name</p></th>
<th class="head"><p>onx_producer_version</p></th>
<th class="head"><p>onx_ai.onnx.ml</p></th>
<th class="head"><p>onx_size_optim</p></th>
<th class="head"><p>onx_nnodes_optim</p></th>
<th class="head"><p>onx_ninits_optim</p></th>
<th class="head"><p>onx_op_Reshape</p></th>
<th class="head"><p>onx_op_Cast</p></th>
<th class="head"><p>onx_op_ZipMap</p></th>
<th class="head"><p>opset15</p></th>
<th class="head"><p>RT/SKL-N=1</p></th>
<th class="head"><p>N=10</p></th>
<th class="head"><p>N=100</p></th>
<th class="head"><p>N=1000</p></th>
<th class="head"><p>N=10000</p></th>
<th class="head"><p>RT/SKL-N=1-min</p></th>
<th class="head"><p>RT/SKL-N=1-max</p></th>
<th class="head"><p>N=10-min</p></th>
<th class="head"><p>N=10-max</p></th>
<th class="head"><p>N=100-min</p></th>
<th class="head"><p>N=100-max</p></th>
<th class="head"><p>N=1000-min</p></th>
<th class="head"><p>N=1000-max</p></th>
<th class="head"><p>N=10000-min</p></th>
<th class="head"><p>N=10000-max</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>LinearRegression</p></td>
<td><p>b-reg</p></td>
<td><p>default</p></td>
<td></td>
<td><p>predict</p></td>
<td><p>0</p></td>
<td><p>{}</p></td>
<td><p>null</p></td>
<td><p>4</p></td>
<td><p>python</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>4</p></td>
<td><p>1</p></td>
<td><p>257</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>257</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 15/1</p></td>
<td><p>0.41</p></td>
<td><p>0.41</p></td>
<td><p>0.41</p></td>
<td><p>0.44</p></td>
<td><p>0.48</p></td>
<td><p>0.39</p></td>
<td><p>0.44</p></td>
<td><p>0.39</p></td>
<td><p>0.45</p></td>
<td><p>0.38</p></td>
<td><p>0.48</p></td>
<td><p>0.39</p></td>
<td><p>0.49</p></td>
<td><p>0.39</p></td>
<td><p>0.59</p></td>
</tr>
<tr class="row-odd"><td><p>LinearRegression</p></td>
<td><p>m-reg</p></td>
<td><p>default</p></td>
<td></td>
<td><p>predict</p></td>
<td><p>0</p></td>
<td><p>{}</p></td>
<td><p>null</p></td>
<td><p>4</p></td>
<td><p>python</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>1</p></td>
<td><p>299</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>299</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 15/1</p></td>
<td><p>0.41</p></td>
<td><p>0.42</p></td>
<td><p>0.43</p></td>
<td><p>0.55</p></td>
<td><p>0.79</p></td>
<td><p>0.39</p></td>
<td><p>0.42</p></td>
<td><p>0.39</p></td>
<td><p>0.44</p></td>
<td><p>0.39</p></td>
<td><p>0.47</p></td>
<td><p>0.49</p></td>
<td><p>0.63</p></td>
<td><p>0.77</p></td>
<td><p>0.83</p></td>
</tr>
<tr class="row-even"><td><p>LinearRegression</p></td>
<td><p>~b-reg-64</p></td>
<td><p>default</p></td>
<td></td>
<td><p>predict</p></td>
<td><p>0</p></td>
<td><p>{}</p></td>
<td><p>null</p></td>
<td><p>4</p></td>
<td><p>python</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>4</p></td>
<td><p>1</p></td>
<td><p>363</p></td>
<td><p>3</p></td>
<td><p>3</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>-1</p></td>
<td><p>363</p></td>
<td><p>3</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 13/</p></td>
<td><p>1.1</p></td>
<td><p>1.1</p></td>
<td><p>1.1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1.1</p></td>
<td><p>1.1</p></td>
<td><p>1</p></td>
<td><p>1.2</p></td>
<td><p>0.93</p></td>
<td><p>1.2</p></td>
<td><p>0.94</p></td>
<td><p>1.1</p></td>
<td><p>0.87</p></td>
<td><p>1.2</p></td>
</tr>
<tr class="row-odd"><td><p>LinearRegression</p></td>
<td><p>~m-reg-64</p></td>
<td><p>default</p></td>
<td></td>
<td><p>predict</p></td>
<td><p>0</p></td>
<td><p>{}</p></td>
<td><p>null</p></td>
<td><p>4</p></td>
<td><p>python</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>1</p></td>
<td><p>403</p></td>
<td><p>3</p></td>
<td><p>3</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>-1</p></td>
<td><p>403</p></td>
<td><p>3</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 13/</p></td>
<td><p>1.1</p></td>
<td><p>1.1</p></td>
<td><p>1.1</p></td>
<td><p>1.1</p></td>
<td><p>0.96</p></td>
<td><p>1.1</p></td>
<td><p>1.1</p></td>
<td><p>1</p></td>
<td><p>1.1</p></td>
<td><p>0.93</p></td>
<td><p>1.3</p></td>
<td><p>0.97</p></td>
<td><p>1.1</p></td>
<td><p>0.9</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>LogisticRegression</p></td>
<td><p>b-cl</p></td>
<td><p>liblinear</p></td>
<td></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>python</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>650</p></td>
<td><p>4</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>650</p></td>
<td><p>4</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>OK 9/1</p></td>
<td><p>0.79</p></td>
<td><p>0.83</p></td>
<td><p>0.84</p></td>
<td><p>1.1</p></td>
<td><p>1.6</p></td>
<td><p>0.75</p></td>
<td><p>0.82</p></td>
<td><p>0.79</p></td>
<td><p>0.87</p></td>
<td><p>0.72</p></td>
<td><p>0.98</p></td>
<td><p>0.98</p></td>
<td><p>1.1</p></td>
<td><p>1.6</p></td>
<td><p>1.6</p></td>
</tr>
<tr class="row-odd"><td><p>LogisticRegression</p></td>
<td><p>b-cl</p></td>
<td><p>liblinear</p></td>
<td><p>{‘zipmap’: False}</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{“LogisticRegression”: {“zipmap”: false}}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>python</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>494</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>494</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 15/1</p></td>
<td><p>0.63</p></td>
<td><p>0.67</p></td>
<td><p>0.7</p></td>
<td><p>0.96</p></td>
<td><p>1.5</p></td>
<td><p>0.59</p></td>
<td><p>0.66</p></td>
<td><p>0.63</p></td>
<td><p>0.71</p></td>
<td><p>0.58</p></td>
<td><p>0.94</p></td>
<td><p>0.87</p></td>
<td><p>1</p></td>
<td><p>1.5</p></td>
<td><p>1.6</p></td>
</tr>
<tr class="row-even"><td><p>LogisticRegression</p></td>
<td><p>b-cl</p></td>
<td><p>liblinear</p></td>
<td><p>onnx</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>python</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>650</p></td>
<td><p>4</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>650</p></td>
<td><p>4</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>OK 9/1</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>LogisticRegression</p></td>
<td><p>b-cl</p></td>
<td><p>liblinear</p></td>
<td><p>onnx/{‘zipmap’: False}</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{“LogisticRegression”: {“zipmap”: false}}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>python</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>494</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>494</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 15/1</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>LogisticRegression</p></td>
<td><p>m-cl</p></td>
<td><p>liblinear</p></td>
<td></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>python</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>679</p></td>
<td><p>4</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>679</p></td>
<td><p>4</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>OK 9/1</p></td>
<td><p>0.84</p></td>
<td><p>0.84</p></td>
<td><p>0.8</p></td>
<td><p>0.71</p></td>
<td><p>0.65</p></td>
<td><p>0.8</p></td>
<td><p>0.87</p></td>
<td><p>0.81</p></td>
<td><p>0.88</p></td>
<td><p>0.71</p></td>
<td><p>0.87</p></td>
<td><p>0.67</p></td>
<td><p>0.76</p></td>
<td><p>0.64</p></td>
<td><p>0.65</p></td>
</tr>
<tr class="row-odd"><td><p>LogisticRegression</p></td>
<td><p>m-cl</p></td>
<td><p>liblinear</p></td>
<td><p>{‘zipmap’: False}</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{“LogisticRegression”: {“zipmap”: false}}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>python</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>521</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>521</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 15/1</p></td>
<td><p>0.66</p></td>
<td><p>0.67</p></td>
<td><p>0.65</p></td>
<td><p>0.64</p></td>
<td><p>0.63</p></td>
<td><p>0.63</p></td>
<td><p>0.68</p></td>
<td><p>0.65</p></td>
<td><p>0.7</p></td>
<td><p>0.58</p></td>
<td><p>0.75</p></td>
<td><p>0.61</p></td>
<td><p>0.68</p></td>
<td><p>0.62</p></td>
<td><p>0.64</p></td>
</tr>
<tr class="row-even"><td><p>LogisticRegression</p></td>
<td><p>m-cl</p></td>
<td><p>liblinear</p></td>
<td><p>onnx</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>python</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>679</p></td>
<td><p>4</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>679</p></td>
<td><p>4</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>OK 9/1</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>LogisticRegression</p></td>
<td><p>m-cl</p></td>
<td><p>liblinear</p></td>
<td><p>onnx/{‘zipmap’: False}</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{“LogisticRegression”: {“zipmap”: false}}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>python</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>521</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>521</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 15/1</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>LogisticRegression</p></td>
<td><p>~b-cl-64</p></td>
<td><p>liblinear</p></td>
<td></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>python</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1159</p></td>
<td><p>13</p></td>
<td><p>5</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>1159</p></td>
<td><p>13</p></td>
<td><p>5</p></td>
<td><p>1</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>OK 13/1</p></td>
<td><p>2.3</p></td>
<td><p>2.4</p></td>
<td><p>2.6</p></td>
<td><p>3.3</p></td>
<td><p>5.3</p></td>
<td><p>2.2</p></td>
<td><p>2.4</p></td>
<td><p>2.3</p></td>
<td><p>2.6</p></td>
<td><p>2.2</p></td>
<td><p>2.8</p></td>
<td><p>3.1</p></td>
<td><p>3.5</p></td>
<td><p>5.2</p></td>
<td><p>5.4</p></td>
</tr>
<tr class="row-odd"><td><p>LogisticRegression</p></td>
<td><p>~b-cl-64</p></td>
<td><p>liblinear</p></td>
<td><p>{‘zipmap’: False}</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{“LogisticRegression”: {“zipmap”: false}}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>python</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1002</p></td>
<td><p>11</p></td>
<td><p>5</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>1002</p></td>
<td><p>11</p></td>
<td><p>5</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>-1</p></td>
<td><p>OK 13/1</p></td>
<td><p>2.2</p></td>
<td><p>2.3</p></td>
<td><p>2.4</p></td>
<td><p>3.2</p></td>
<td><p>5.2</p></td>
<td><p>2.1</p></td>
<td><p>2.3</p></td>
<td><p>2.1</p></td>
<td><p>2.4</p></td>
<td><p>2</p></td>
<td><p>2.6</p></td>
<td><p>2.9</p></td>
<td><p>3.3</p></td>
<td><p>5.1</p></td>
<td><p>5.3</p></td>
</tr>
<tr class="row-even"><td><p>LogisticRegression</p></td>
<td><p>~b-cl-64</p></td>
<td><p>liblinear</p></td>
<td><p>onnx</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>python</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1159</p></td>
<td><p>13</p></td>
<td><p>5</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>1159</p></td>
<td><p>13</p></td>
<td><p>5</p></td>
<td><p>1</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>OK 13/1</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>LogisticRegression</p></td>
<td><p>~b-cl-64</p></td>
<td><p>liblinear</p></td>
<td><p>onnx/{‘zipmap’: False}</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{“LogisticRegression”: {“zipmap”: false}}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>python</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1002</p></td>
<td><p>11</p></td>
<td><p>5</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>1002</p></td>
<td><p>11</p></td>
<td><p>5</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>-1</p></td>
<td><p>OK 13/1</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>LogisticRegression</p></td>
<td><p>~b-cl-dec</p></td>
<td><p>liblinear-dec</p></td>
<td><p>{‘raw_scores’: True, ‘zipmap’: False}</p></td>
<td><p>decision_function</p></td>
<td><p>1</p></td>
<td><p>{“LogisticRegression”: {“raw_scores”: true, “zipmap”: false}}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>python</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>397</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>397</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 15/1</p></td>
<td><p>0.52</p></td>
<td><p>0.54</p></td>
<td><p>0.56</p></td>
<td><p>0.74</p></td>
<td><p>1.4</p></td>
<td><p>0.5</p></td>
<td><p>0.53</p></td>
<td><p>0.51</p></td>
<td><p>0.56</p></td>
<td><p>0.51</p></td>
<td><p>0.6</p></td>
<td><p>0.69</p></td>
<td><p>0.8</p></td>
<td><p>1.4</p></td>
<td><p>1.5</p></td>
</tr>
<tr class="row-odd"><td><p>LogisticRegression</p></td>
<td><p>~m-cl-dec</p></td>
<td><p>liblinear-dec</p></td>
<td><p>{‘raw_scores’: True, ‘zipmap’: False}</p></td>
<td><p>decision_function</p></td>
<td><p>1</p></td>
<td><p>{“LogisticRegression”: {“raw_scores”: true, “zipmap”: false}}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>python</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>424</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>424</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 15/1</p></td>
<td><p>0.52</p></td>
<td><p>0.53</p></td>
<td><p>0.54</p></td>
<td><p>0.65</p></td>
<td><p>0.82</p></td>
<td><p>0.49</p></td>
<td><p>0.53</p></td>
<td><p>0.51</p></td>
<td><p>0.55</p></td>
<td><p>0.47</p></td>
<td><p>0.65</p></td>
<td><p>0.6</p></td>
<td><p>0.69</p></td>
<td><p>0.8</p></td>
<td><p>0.85</p></td>
</tr>
</tbody>
</table>
<p>Full results are available at <span class="xref std std-ref">l-onnx-bench-python</span>.</p>
</section>
<section id="python-compiled">
<h2><a class="toc-backref" href="#id2">python_compiled</a><a class="headerlink" href="#python-compiled" title="Permalink to this headline">¶</a></h2>
<p>This runtime is almost the same as the previous
one but it creates and compiles a dedicated function to
call every node of the graph. Graph operations are faster
but it is not possible to look into every
intermediate node anymore.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">AdaBoostRegressor</span>
<span class="kn">from</span> <span class="nn">sklearn.datasets</span> <span class="kn">import</span> <span class="n">load_iris</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">mlprodict.onnxrt</span> <span class="kn">import</span> <span class="n">OnnxInference</span>
<span class="kn">from</span> <span class="nn">mlprodict.onnx_conv</span> <span class="kn">import</span> <span class="n">to_onnx</span>

<span class="n">iris</span> <span class="o">=</span> <span class="n">load_iris</span><span class="p">()</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">iris</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">iris</span><span class="o">.</span><span class="n">target</span>
<span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="n">clr</span> <span class="o">=</span> <span class="n">AdaBoostRegressor</span><span class="p">(</span><span class="n">n_estimators</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">clr</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="n">model_def</span> <span class="o">=</span> <span class="n">to_onnx</span><span class="p">(</span><span class="n">clr</span><span class="p">,</span> <span class="n">X_train</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
                    <span class="n">target_opset</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="n">oinf</span> <span class="o">=</span> <span class="n">OnnxInference</span><span class="p">(</span><span class="n">model_def</span><span class="p">,</span> <span class="n">runtime</span><span class="o">=</span><span class="s2">&quot;python_compiled&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">oinf</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">OnnxInference</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">compiled_run</span><span class="p">(</span><span class="n">dict_inputs</span><span class="p">,</span> <span class="n">yield_ops</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">yield_ops</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;yields_ops should be None.&#39;</span><span class="p">)</span>
            <span class="c1"># init: axis_name (axis_name)</span>
            <span class="c1"># init: estimators_weights (estimators_weights)</span>
            <span class="c1"># init: half_scalar (half_scalar)</span>
            <span class="c1"># init: k_value (k_value)</span>
            <span class="c1"># init: last_index (last_index)</span>
            <span class="c1"># init: negate (negate)</span>
            <span class="c1"># init: shape_tensor (shape_tensor)</span>
            <span class="c1"># inputs</span>
            <span class="n">X</span> <span class="o">=</span> <span class="n">dict_inputs</span><span class="p">[</span><span class="s1">&#39;X&#39;</span><span class="p">]</span>
            <span class="p">(</span><span class="n">est_label_2</span><span class="p">,</span> <span class="p">)</span> <span class="o">=</span> <span class="n">n0_treeensembleregressor</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
            <span class="p">(</span><span class="n">est_label_0</span><span class="p">,</span> <span class="p">)</span> <span class="o">=</span> <span class="n">n1_treeensembleregressor</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
            <span class="p">(</span><span class="n">est_label_1</span><span class="p">,</span> <span class="p">)</span> <span class="o">=</span> <span class="n">n2_treeensembleregressor</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
            <span class="p">(</span><span class="n">est_label_3</span><span class="p">,</span> <span class="p">)</span> <span class="o">=</span> <span class="n">n3_treeensembleregressor</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
            <span class="p">(</span><span class="n">est_label_4</span><span class="p">,</span> <span class="p">)</span> <span class="o">=</span> <span class="n">n4_treeensembleregressor</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
            <span class="p">(</span><span class="n">concatenated_labels</span><span class="p">,</span> <span class="p">)</span> <span class="o">=</span> <span class="n">n5_concat</span><span class="p">(</span><span class="n">est_label_0</span><span class="p">,</span> <span class="n">est_label_1</span><span class="p">,</span> <span class="n">est_label_2</span><span class="p">,</span> <span class="n">est_label_3</span><span class="p">,</span> <span class="n">est_label_4</span><span class="p">)</span>
            <span class="p">(</span><span class="n">negated_labels</span><span class="p">,</span> <span class="p">)</span> <span class="o">=</span> <span class="n">n6_mul</span><span class="p">(</span><span class="n">concatenated_labels</span><span class="p">,</span> <span class="n">negate</span><span class="p">)</span>
            <span class="p">(</span><span class="n">sorted_values</span><span class="p">,</span> <span class="n">sorted_indices</span><span class="p">,</span> <span class="p">)</span> <span class="o">=</span> <span class="n">n7_topk_11</span><span class="p">(</span><span class="n">negated_labels</span><span class="p">,</span> <span class="n">k_value</span><span class="p">)</span>
            <span class="p">(</span><span class="n">array_feat_extractor_output</span><span class="p">,</span> <span class="p">)</span> <span class="o">=</span> <span class="n">n8_arrayfeatureextractor</span><span class="p">(</span><span class="n">estimators_weights</span><span class="p">,</span> <span class="n">sorted_indices</span><span class="p">)</span>
            <span class="p">(</span><span class="n">reshaped_weights</span><span class="p">,</span> <span class="p">)</span> <span class="o">=</span> <span class="n">n9_reshape_5</span><span class="p">(</span><span class="n">array_feat_extractor_output</span><span class="p">,</span> <span class="n">shape_tensor</span><span class="p">)</span>
            <span class="p">(</span><span class="n">weights_cdf</span><span class="p">,</span> <span class="p">)</span> <span class="o">=</span> <span class="n">n10_cumsum</span><span class="p">(</span><span class="n">reshaped_weights</span><span class="p">,</span> <span class="n">axis_name</span><span class="p">)</span>
            <span class="p">(</span><span class="n">median_value</span><span class="p">,</span> <span class="p">)</span> <span class="o">=</span> <span class="n">n11_arrayfeatureextractor</span><span class="p">(</span><span class="n">weights_cdf</span><span class="p">,</span> <span class="n">last_index</span><span class="p">)</span>
            <span class="p">(</span><span class="n">comp_value</span><span class="p">,</span> <span class="p">)</span> <span class="o">=</span> <span class="n">n12_mul</span><span class="p">(</span><span class="n">median_value</span><span class="p">,</span> <span class="n">half_scalar</span><span class="p">)</span>
            <span class="p">(</span><span class="n">median_or_above</span><span class="p">,</span> <span class="p">)</span> <span class="o">=</span> <span class="n">n13_less</span><span class="p">(</span><span class="n">weights_cdf</span><span class="p">,</span> <span class="n">comp_value</span><span class="p">)</span>
            <span class="p">(</span><span class="n">cast_result</span><span class="p">,</span> <span class="p">)</span> <span class="o">=</span> <span class="n">n14_cast</span><span class="p">(</span><span class="n">median_or_above</span><span class="p">)</span>
            <span class="p">(</span><span class="n">median_idx</span><span class="p">,</span> <span class="p">)</span> <span class="o">=</span> <span class="n">n15_argmin_12</span><span class="p">(</span><span class="n">cast_result</span><span class="p">)</span>
            <span class="p">(</span><span class="n">median_estimators</span><span class="p">,</span> <span class="p">)</span> <span class="o">=</span> <span class="n">n16_gatherelements</span><span class="p">(</span><span class="n">sorted_indices</span><span class="p">,</span> <span class="n">median_idx</span><span class="p">)</span>
            <span class="p">(</span><span class="n">variable</span><span class="p">,</span> <span class="p">)</span> <span class="o">=</span> <span class="n">n17_gatherelements</span><span class="p">(</span><span class="n">concatenated_labels</span><span class="p">,</span> <span class="n">median_estimators</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s1">&#39;variable&#39;</span><span class="p">:</span> <span class="n">variable</span><span class="p">,</span>
            <span class="p">}</span>
</pre></div>
</div>
</section>
<section id="onnxruntime1">
<h2><a class="toc-backref" href="#id3">onnxruntime1</a><a class="headerlink" href="#onnxruntime1" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/microsoft/onnxruntime">onnxruntime</a> loads the <a class="reference external" href="https://onnx.ai/">ONNX</a> data in a single
session and calls it onle once to compute the predictions.
We create a table similar to <a class="reference internal" href="#l-onnx-pyrun-tbl"><span class="std std-ref">Python Runtime = ‘python’</span></a>.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">logging</span> <span class="kn">import</span> <span class="n">getLogger</span>
<span class="kn">from</span> <span class="nn">pyquickhelper.loghelper</span> <span class="kn">import</span> <span class="n">noLOG</span>
<span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="n">DataFrame</span>
<span class="kn">from</span> <span class="nn">pyquickhelper.pandashelper</span> <span class="kn">import</span> <span class="n">df2rst</span>
<span class="kn">from</span> <span class="nn">sklearn.exceptions</span> <span class="kn">import</span> <span class="n">ConvergenceWarning</span>
<span class="kn">from</span> <span class="nn">sklearn.utils._testing</span> <span class="kn">import</span> <span class="n">ignore_warnings</span>
<span class="kn">from</span> <span class="nn">mlprodict.onnxrt.validate</span> <span class="kn">import</span> <span class="n">enumerate_validated_operator_opsets</span><span class="p">,</span> <span class="n">summary_report</span>


<span class="nd">@ignore_warnings</span><span class="p">(</span><span class="n">category</span><span class="o">=</span><span class="p">(</span><span class="ne">UserWarning</span><span class="p">,</span> <span class="n">ConvergenceWarning</span><span class="p">,</span> <span class="ne">RuntimeWarning</span><span class="p">,</span> <span class="ne">FutureWarning</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">build_table</span><span class="p">():</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;skl2onnx&#39;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">enumerate_validated_operator_opsets</span><span class="p">(</span>
        <span class="mi">0</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fLOG</span><span class="o">=</span><span class="n">noLOG</span><span class="p">,</span> <span class="n">runtime</span><span class="o">=</span><span class="s1">&#39;onnxruntime1&#39;</span><span class="p">,</span>
        <span class="n">models</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;LinearRegression&#39;</span><span class="p">,</span> <span class="s1">&#39;LogisticRegression&#39;</span><span class="p">],</span>
        <span class="n">benchmark</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
    <span class="n">piv</span> <span class="o">=</span> <span class="n">summary_report</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;ERROR-msg&quot;</span> <span class="ow">in</span> <span class="n">piv</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">shorten</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
            <span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">75</span><span class="p">:</span>
                <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="p">[:</span><span class="mi">75</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;...&quot;</span>
            <span class="k">return</span> <span class="n">text</span>

        <span class="n">piv</span><span class="p">[</span><span class="s2">&quot;ERROR-msg&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">piv</span><span class="p">[</span><span class="s2">&quot;ERROR-msg&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">shorten</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">df2rst</span><span class="p">(</span><span class="n">piv</span><span class="p">,</span> <span class="n">number_format</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                 <span class="n">replacements</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;nan&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;ERR: 4convert&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">}))</span>


<span class="n">build_table</span><span class="p">()</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<table class="table">
<colgroup>
<col style="width: 3%" />
<col style="width: 1%" />
<col style="width: 2%" />
<col style="width: 5%" />
<col style="width: 3%" />
<col style="width: 2%" />
<col style="width: 8%" />
<col style="width: 6%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 1%" />
<col style="width: 1%" />
<col style="width: 1%" />
<col style="width: 1%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 11%" />
<col style="width: 2%" />
<col style="width: 1%" />
<col style="width: 1%" />
<col style="width: 1%" />
<col style="width: 1%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 1%" />
<col style="width: 1%" />
<col style="width: 1%" />
<col style="width: 1%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>name</p></th>
<th class="head"><p>problem</p></th>
<th class="head"><p>scenario</p></th>
<th class="head"><p>optim</p></th>
<th class="head"><p>method_name</p></th>
<th class="head"><p>output_index</p></th>
<th class="head"><p>conv_options</p></th>
<th class="head"><p>inst</p></th>
<th class="head"><p>n_features</p></th>
<th class="head"><p>runtime</p></th>
<th class="head"><p>skl_version</p></th>
<th class="head"><p>skl_nop</p></th>
<th class="head"><p>skl_ncoef</p></th>
<th class="head"><p>skl_nlin</p></th>
<th class="head"><p>onx_size</p></th>
<th class="head"><p>onx_nnodes</p></th>
<th class="head"><p>onx_ninits</p></th>
<th class="head"><p>onx_producer_name</p></th>
<th class="head"><p>onx_producer_version</p></th>
<th class="head"><p>onx_ai.onnx.ml</p></th>
<th class="head"><p>onx_size_optim</p></th>
<th class="head"><p>onx_nnodes_optim</p></th>
<th class="head"><p>onx_ninits_optim</p></th>
<th class="head"><p>onx_op_Reshape</p></th>
<th class="head"><p>onx_op_Cast</p></th>
<th class="head"><p>onx_op_ZipMap</p></th>
<th class="head"><p>opset15</p></th>
<th class="head"><p>ERROR-msg</p></th>
<th class="head"><p>RT/SKL-N=1</p></th>
<th class="head"><p>N=10</p></th>
<th class="head"><p>N=100</p></th>
<th class="head"><p>N=1000</p></th>
<th class="head"><p>N=10000</p></th>
<th class="head"><p>RT/SKL-N=1-min</p></th>
<th class="head"><p>RT/SKL-N=1-max</p></th>
<th class="head"><p>N=10-min</p></th>
<th class="head"><p>N=10-max</p></th>
<th class="head"><p>N=100-min</p></th>
<th class="head"><p>N=100-max</p></th>
<th class="head"><p>N=1000-min</p></th>
<th class="head"><p>N=1000-max</p></th>
<th class="head"><p>N=10000-min</p></th>
<th class="head"><p>N=10000-max</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>LinearRegression</p></td>
<td><p>b-reg</p></td>
<td><p>default</p></td>
<td></td>
<td><p>predict</p></td>
<td><p>0</p></td>
<td><p>{}</p></td>
<td><p>null</p></td>
<td><p>4</p></td>
<td><p>onnxruntime1</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>4</p></td>
<td><p>1</p></td>
<td><p>257</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>257</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 15/1</p></td>
<td></td>
<td><p>1.2</p></td>
<td><p>0.72</p></td>
<td><p>0.71</p></td>
<td><p>0.84</p></td>
<td><p>2</p></td>
<td><p>0.66</p></td>
<td><p>9.4</p></td>
<td><p>0.64</p></td>
<td><p>1.1</p></td>
<td><p>0.64</p></td>
<td><p>0.81</p></td>
<td><p>0.71</p></td>
<td><p>0.95</p></td>
<td><p>1.8</p></td>
<td><p>2.3</p></td>
</tr>
<tr class="row-odd"><td><p>LinearRegression</p></td>
<td><p>m-reg</p></td>
<td><p>default</p></td>
<td></td>
<td><p>predict</p></td>
<td><p>0</p></td>
<td><p>{}</p></td>
<td><p>null</p></td>
<td><p>4</p></td>
<td><p>onnxruntime1</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>1</p></td>
<td><p>299</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>299</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 15/1</p></td>
<td></td>
<td><p>0.7</p></td>
<td><p>0.69</p></td>
<td><p>0.69</p></td>
<td><p>0.78</p></td>
<td><p>0.71</p></td>
<td><p>0.66</p></td>
<td><p>0.79</p></td>
<td><p>0.62</p></td>
<td><p>1.1</p></td>
<td><p>0.6</p></td>
<td><p>0.81</p></td>
<td><p>0.71</p></td>
<td><p>0.89</p></td>
<td><p>0.63</p></td>
<td><p>0.78</p></td>
</tr>
<tr class="row-even"><td><p>LinearRegression</p></td>
<td><p>~b-reg-64</p></td>
<td><p>default</p></td>
<td></td>
<td><p>predict</p></td>
<td><p>0</p></td>
<td><p>{}</p></td>
<td><p>null</p></td>
<td><p>4</p></td>
<td><p>onnxruntime1</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>4</p></td>
<td><p>1</p></td>
<td><p>363</p></td>
<td><p>3</p></td>
<td><p>3</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>-1</p></td>
<td><p>363</p></td>
<td><p>3</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 13/</p></td>
<td></td>
<td><p>1.3</p></td>
<td><p>1.3</p></td>
<td><p>1.3</p></td>
<td><p>1.8</p></td>
<td><p>2.1</p></td>
<td><p>1.2</p></td>
<td><p>1.6</p></td>
<td><p>1.2</p></td>
<td><p>1.9</p></td>
<td><p>1.2</p></td>
<td><p>1.5</p></td>
<td><p>1.7</p></td>
<td><p>1.9</p></td>
<td><p>1.7</p></td>
<td><p>2.9</p></td>
</tr>
<tr class="row-odd"><td><p>LinearRegression</p></td>
<td><p>~m-reg-64</p></td>
<td><p>default</p></td>
<td></td>
<td><p>predict</p></td>
<td><p>0</p></td>
<td><p>{}</p></td>
<td><p>null</p></td>
<td><p>4</p></td>
<td><p>onnxruntime1</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>1</p></td>
<td><p>403</p></td>
<td><p>3</p></td>
<td><p>3</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>-1</p></td>
<td><p>403</p></td>
<td><p>3</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 13/</p></td>
<td></td>
<td><p>1.3</p></td>
<td><p>1.3</p></td>
<td><p>1.3</p></td>
<td><p>1.5</p></td>
<td><p>1.6</p></td>
<td><p>1.2</p></td>
<td><p>1.5</p></td>
<td><p>1.2</p></td>
<td><p>1.9</p></td>
<td><p>1.1</p></td>
<td><p>1.4</p></td>
<td><p>1.4</p></td>
<td><p>1.6</p></td>
<td><p>1.5</p></td>
<td><p>1.7</p></td>
</tr>
<tr class="row-even"><td><p>LogisticRegression</p></td>
<td><p>b-cl</p></td>
<td><p>liblinear</p></td>
<td></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime1</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>650</p></td>
<td><p>4</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>650</p></td>
<td><p>4</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>OK 9/1</p></td>
<td></td>
<td><p>0.93</p></td>
<td><p>0.95</p></td>
<td><p>1.3</p></td>
<td><p>4.8</p></td>
<td><p>11</p></td>
<td><p>0.86</p></td>
<td><p>1.2</p></td>
<td><p>0.9</p></td>
<td><p>1</p></td>
<td><p>1.2</p></td>
<td><p>1.4</p></td>
<td><p>4.5</p></td>
<td><p>5</p></td>
<td><p>10</p></td>
<td><p>11</p></td>
</tr>
<tr class="row-odd"><td><p>LogisticRegression</p></td>
<td><p>b-cl</p></td>
<td><p>liblinear</p></td>
<td><p>{‘zipmap’: False}</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{“LogisticRegression”: {“zipmap”: false}}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime1</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>494</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>494</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 15/1</p></td>
<td></td>
<td><p>0.59</p></td>
<td><p>0.59</p></td>
<td><p>0.69</p></td>
<td><p>0.74</p></td>
<td><p>1</p></td>
<td><p>0.55</p></td>
<td><p>0.69</p></td>
<td><p>0.57</p></td>
<td><p>0.62</p></td>
<td><p>0.55</p></td>
<td><p>1.5</p></td>
<td><p>0.68</p></td>
<td><p>0.78</p></td>
<td><p>0.93</p></td>
<td><p>1.1</p></td>
</tr>
<tr class="row-even"><td><p>LogisticRegression</p></td>
<td><p>b-cl</p></td>
<td><p>liblinear</p></td>
<td><p>onnx</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime1</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>650</p></td>
<td><p>4</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>650</p></td>
<td><p>4</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>OK 9/1</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>LogisticRegression</p></td>
<td><p>b-cl</p></td>
<td><p>liblinear</p></td>
<td><p>onnx/{‘zipmap’: False}</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{“LogisticRegression”: {“zipmap”: false}}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime1</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>494</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>494</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 15/1</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>LogisticRegression</p></td>
<td><p>m-cl</p></td>
<td><p>liblinear</p></td>
<td></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime1</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>679</p></td>
<td><p>4</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>679</p></td>
<td><p>4</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>OK 9/1</p></td>
<td></td>
<td><p>1</p></td>
<td><p>0.98</p></td>
<td><p>1.3</p></td>
<td><p>3.3</p></td>
<td><p>4.5</p></td>
<td><p>0.92</p></td>
<td><p>1.2</p></td>
<td><p>0.92</p></td>
<td><p>1</p></td>
<td><p>1.2</p></td>
<td><p>1.4</p></td>
<td><p>3.2</p></td>
<td><p>3.4</p></td>
<td><p>4.5</p></td>
<td><p>4.5</p></td>
</tr>
<tr class="row-odd"><td><p>LogisticRegression</p></td>
<td><p>m-cl</p></td>
<td><p>liblinear</p></td>
<td><p>{‘zipmap’: False}</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{“LogisticRegression”: {“zipmap”: false}}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime1</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>521</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>521</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 15/1</p></td>
<td></td>
<td><p>0.64</p></td>
<td><p>0.62</p></td>
<td><p>0.7</p></td>
<td><p>0.48</p></td>
<td><p>0.4</p></td>
<td><p>0.6</p></td>
<td><p>0.78</p></td>
<td><p>0.58</p></td>
<td><p>0.64</p></td>
<td><p>0.54</p></td>
<td><p>1.6</p></td>
<td><p>0.46</p></td>
<td><p>0.5</p></td>
<td><p>0.39</p></td>
<td><p>0.41</p></td>
</tr>
<tr class="row-even"><td><p>LogisticRegression</p></td>
<td><p>m-cl</p></td>
<td><p>liblinear</p></td>
<td><p>onnx</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime1</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>679</p></td>
<td><p>4</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>679</p></td>
<td><p>4</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>OK 9/1</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>LogisticRegression</p></td>
<td><p>m-cl</p></td>
<td><p>liblinear</p></td>
<td><p>onnx/{‘zipmap’: False}</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{“LogisticRegression”: {“zipmap”: false}}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime1</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>521</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>521</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 15/1</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>LogisticRegression</p></td>
<td><p>~b-cl-64</p></td>
<td><p>liblinear</p></td>
<td></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime1</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1159</p></td>
<td><p>13</p></td>
<td><p>5</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>1159</p></td>
<td><p>13</p></td>
<td><p>5</p></td>
<td><p>1</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>ERR: 5ort_load</p></td>
<td><p>Unable to create InferenceSession due to ‘[ONNXRuntimeError] : 10 : INVALID…</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>LogisticRegression</p></td>
<td><p>~b-cl-64</p></td>
<td><p>liblinear</p></td>
<td><p>{‘zipmap’: False}</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{“LogisticRegression”: {“zipmap”: false}}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime1</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1002</p></td>
<td><p>11</p></td>
<td><p>5</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>1002</p></td>
<td><p>11</p></td>
<td><p>5</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>-1</p></td>
<td><p>OK 13/1</p></td>
<td></td>
<td><p>2.2</p></td>
<td><p>2.3</p></td>
<td><p>2.2</p></td>
<td><p>2.6</p></td>
<td><p>3.5</p></td>
<td><p>2</p></td>
<td><p>2.6</p></td>
<td><p>2</p></td>
<td><p>3.8</p></td>
<td><p>1.9</p></td>
<td><p>2.3</p></td>
<td><p>2.5</p></td>
<td><p>2.7</p></td>
<td><p>3.4</p></td>
<td><p>3.6</p></td>
</tr>
<tr class="row-even"><td><p>LogisticRegression</p></td>
<td><p>~b-cl-64</p></td>
<td><p>liblinear</p></td>
<td><p>onnx</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime1</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1159</p></td>
<td><p>13</p></td>
<td><p>5</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>1159</p></td>
<td><p>13</p></td>
<td><p>5</p></td>
<td><p>1</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>ERR: 5ort_load</p></td>
<td><p>Unable to create InferenceSession due to ‘[ONNXRuntimeError] : 10 : INVALID…</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>LogisticRegression</p></td>
<td><p>~b-cl-64</p></td>
<td><p>liblinear</p></td>
<td><p>onnx/{‘zipmap’: False}</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{“LogisticRegression”: {“zipmap”: false}}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime1</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1002</p></td>
<td><p>11</p></td>
<td><p>5</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>1002</p></td>
<td><p>11</p></td>
<td><p>5</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>-1</p></td>
<td><p>OK 13/1</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>LogisticRegression</p></td>
<td><p>~b-cl-dec</p></td>
<td><p>liblinear-dec</p></td>
<td><p>{‘raw_scores’: True, ‘zipmap’: False}</p></td>
<td><p>decision_function</p></td>
<td><p>1</p></td>
<td><p>{“LogisticRegression”: {“raw_scores”: true, “zipmap”: false}}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime1</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>397</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>397</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 15/1</p></td>
<td></td>
<td><p>0.66</p></td>
<td><p>0.67</p></td>
<td><p>0.67</p></td>
<td><p>0.89</p></td>
<td><p>1.3</p></td>
<td><p>0.63</p></td>
<td><p>0.72</p></td>
<td><p>0.62</p></td>
<td><p>0.88</p></td>
<td><p>0.62</p></td>
<td><p>0.75</p></td>
<td><p>0.82</p></td>
<td><p>1</p></td>
<td><p>1.2</p></td>
<td><p>1.4</p></td>
</tr>
<tr class="row-odd"><td><p>LogisticRegression</p></td>
<td><p>~m-cl-dec</p></td>
<td><p>liblinear-dec</p></td>
<td><p>{‘raw_scores’: True, ‘zipmap’: False}</p></td>
<td><p>decision_function</p></td>
<td><p>1</p></td>
<td><p>{“LogisticRegression”: {“raw_scores”: true, “zipmap”: false}}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime1</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>424</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>424</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 15/1</p></td>
<td></td>
<td><p>0.66</p></td>
<td><p>0.66</p></td>
<td><p>0.67</p></td>
<td><p>0.69</p></td>
<td><p>0.7</p></td>
<td><p>0.63</p></td>
<td><p>0.71</p></td>
<td><p>0.61</p></td>
<td><p>0.91</p></td>
<td><p>0.61</p></td>
<td><p>0.8</p></td>
<td><p>0.64</p></td>
<td><p>0.74</p></td>
<td><p>0.66</p></td>
<td><p>0.73</p></td>
</tr>
</tbody>
</table>
<p>Full results are available at <a class="reference internal" href="skl_converters/bench_onnxrt1.html#l-onnx-bench-onnxruntime1"><span class="std std-ref">Availability of scikit-learn model for runtime onnxruntime1</span></a>.</p>
<p id="l-onnxruntime-profiling"><strong>Profiling</strong></p>
<p id="index-0"><a class="reference external" href="https://github.com/microsoft/onnxruntime">onnxruntime</a> has a tool to verify and test <a class="reference external" href="https://onnx.ai/">ONNX</a>
graphs: <a class="reference external" href="https://github.com/microsoft/onnxruntime/tree/master/onnxruntime/test/perftest">onnxruntime_perf_test</a>. It measures the execution time
for a graph. It can also be used to profile the code
of <a class="reference external" href="https://github.com/microsoft/onnxruntime">onnxruntime</a>. On Windows (but it also works on Linux):</p>
<ul class="simple">
<li><p>Creates an onnx graph and its inputs as protobug. Places them in a folder
like explained in the page <a class="reference external" href="https://github.com/microsoft/onnxruntime/tree/master/onnxruntime/test/perftest">onnxruntime_perf_test</a>.</p></li>
<li><p>Clone and compile <a class="reference external" href="https://github.com/microsoft/onnxruntime">onnxruntime</a> using release with debug information,
<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">tools/ci_build/build.py</span> <span class="pre">--build_dir</span> <span class="pre">build_dir</span> <span class="pre">--config</span> <span class="pre">RelWithDebInfo</span> <span class="pre">--build_wheel</span> <span class="pre">--use_openmp</span> <span class="pre">--use_mklml</span> <span class="pre">--numpy_version=</span> <span class="pre">--skip_onnx_tests</span></code></p></li>
<li><p>Open Visual Studio and modifies the command line of <cite>onnxruntime_perf_test.exe</cite>
as: <code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">-t</span> <span class="pre">30</span> <span class="pre">&lt;model.onnx&gt;</span> <span class="pre">&lt;anything.txt&gt;</span></code>. Select it as startup project.</p></li>
<li><p>Starts the profiling.</p></li>
</ul>
</section>
<section id="onnxruntime2-independent-onnxruntime-for-every-node">
<h2><a class="toc-backref" href="#id4">onnxruntime2: independent onnxruntime for every node</a><a class="headerlink" href="#onnxruntime2-independent-onnxruntime-for-every-node" title="Permalink to this headline">¶</a></h2>
<p>This runtime does not load the <a class="reference external" href="https://onnx.ai/">ONNX</a> data in a single
session but instead calls <a class="reference external" href="https://github.com/microsoft/onnxruntime">onnxruntime</a> for each node
independently. This was developped mostly to facilitate
the implementation of converters from <a class="reference external" href="https://scikit-learn.org/stable/">scikit-learn</a>
object to <a class="reference external" href="https://onnx.ai/">ONNX</a>. We create a table similar to
<a class="reference internal" href="#l-onnx-pyrun-tbl"><span class="std std-ref">Python Runtime = ‘python’</span></a>.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">logging</span> <span class="kn">import</span> <span class="n">getLogger</span>
<span class="kn">from</span> <span class="nn">pyquickhelper.loghelper</span> <span class="kn">import</span> <span class="n">noLOG</span>
<span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="n">DataFrame</span>
<span class="kn">from</span> <span class="nn">pyquickhelper.pandashelper</span> <span class="kn">import</span> <span class="n">df2rst</span>
<span class="kn">from</span> <span class="nn">sklearn.exceptions</span> <span class="kn">import</span> <span class="n">ConvergenceWarning</span>
<span class="kn">from</span> <span class="nn">sklearn.utils._testing</span> <span class="kn">import</span> <span class="n">ignore_warnings</span>
<span class="kn">from</span> <span class="nn">mlprodict.onnxrt.validate</span> <span class="kn">import</span> <span class="n">enumerate_validated_operator_opsets</span><span class="p">,</span> <span class="n">summary_report</span>


<span class="nd">@ignore_warnings</span><span class="p">(</span><span class="n">category</span><span class="o">=</span><span class="p">(</span><span class="ne">UserWarning</span><span class="p">,</span> <span class="n">ConvergenceWarning</span><span class="p">,</span> <span class="ne">RuntimeWarning</span><span class="p">,</span> <span class="ne">FutureWarning</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">build_table</span><span class="p">():</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;skl2onnx&#39;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">enumerate_validated_operator_opsets</span><span class="p">(</span>
        <span class="mi">0</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fLOG</span><span class="o">=</span><span class="n">noLOG</span><span class="p">,</span> <span class="n">runtime</span><span class="o">=</span><span class="s1">&#39;onnxruntime2&#39;</span><span class="p">,</span>
        <span class="n">models</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;LinearRegression&#39;</span><span class="p">,</span> <span class="s1">&#39;LogisticRegression&#39;</span><span class="p">],</span>
        <span class="n">benchmark</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
    <span class="n">piv</span> <span class="o">=</span> <span class="n">summary_report</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;ERROR-msg&quot;</span> <span class="ow">in</span> <span class="n">piv</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">shorten</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
            <span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">75</span><span class="p">:</span>
                <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="p">[:</span><span class="mi">75</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;...&quot;</span>
            <span class="k">return</span> <span class="n">text</span>

        <span class="n">piv</span><span class="p">[</span><span class="s2">&quot;ERROR-msg&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">piv</span><span class="p">[</span><span class="s2">&quot;ERROR-msg&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">shorten</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">df2rst</span><span class="p">(</span><span class="n">piv</span><span class="p">,</span> <span class="n">number_format</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                 <span class="n">replacements</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;nan&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;ERR: 4convert&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">}))</span>


<span class="n">build_table</span><span class="p">()</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<table class="table">
<colgroup>
<col style="width: 3%" />
<col style="width: 1%" />
<col style="width: 2%" />
<col style="width: 5%" />
<col style="width: 3%" />
<col style="width: 2%" />
<col style="width: 8%" />
<col style="width: 6%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 1%" />
<col style="width: 1%" />
<col style="width: 1%" />
<col style="width: 1%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 11%" />
<col style="width: 2%" />
<col style="width: 1%" />
<col style="width: 1%" />
<col style="width: 1%" />
<col style="width: 1%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 1%" />
<col style="width: 1%" />
<col style="width: 1%" />
<col style="width: 1%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>name</p></th>
<th class="head"><p>problem</p></th>
<th class="head"><p>scenario</p></th>
<th class="head"><p>optim</p></th>
<th class="head"><p>method_name</p></th>
<th class="head"><p>output_index</p></th>
<th class="head"><p>conv_options</p></th>
<th class="head"><p>inst</p></th>
<th class="head"><p>n_features</p></th>
<th class="head"><p>runtime</p></th>
<th class="head"><p>skl_version</p></th>
<th class="head"><p>skl_nop</p></th>
<th class="head"><p>skl_ncoef</p></th>
<th class="head"><p>skl_nlin</p></th>
<th class="head"><p>onx_size</p></th>
<th class="head"><p>onx_nnodes</p></th>
<th class="head"><p>onx_ninits</p></th>
<th class="head"><p>onx_producer_name</p></th>
<th class="head"><p>onx_producer_version</p></th>
<th class="head"><p>onx_ai.onnx.ml</p></th>
<th class="head"><p>onx_size_optim</p></th>
<th class="head"><p>onx_nnodes_optim</p></th>
<th class="head"><p>onx_ninits_optim</p></th>
<th class="head"><p>onx_op_Reshape</p></th>
<th class="head"><p>onx_op_Cast</p></th>
<th class="head"><p>onx_op_ZipMap</p></th>
<th class="head"><p>opset15</p></th>
<th class="head"><p>ERROR-msg</p></th>
<th class="head"><p>RT/SKL-N=1</p></th>
<th class="head"><p>N=10</p></th>
<th class="head"><p>N=100</p></th>
<th class="head"><p>N=1000</p></th>
<th class="head"><p>N=10000</p></th>
<th class="head"><p>RT/SKL-N=1-min</p></th>
<th class="head"><p>RT/SKL-N=1-max</p></th>
<th class="head"><p>N=10-min</p></th>
<th class="head"><p>N=10-max</p></th>
<th class="head"><p>N=100-min</p></th>
<th class="head"><p>N=100-max</p></th>
<th class="head"><p>N=1000-min</p></th>
<th class="head"><p>N=1000-max</p></th>
<th class="head"><p>N=10000-min</p></th>
<th class="head"><p>N=10000-max</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>LinearRegression</p></td>
<td><p>b-reg</p></td>
<td><p>default</p></td>
<td></td>
<td><p>predict</p></td>
<td><p>0</p></td>
<td><p>{}</p></td>
<td><p>null</p></td>
<td><p>4</p></td>
<td><p>onnxruntime2</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>4</p></td>
<td><p>1</p></td>
<td><p>257</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>257</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 15/1</p></td>
<td></td>
<td><p>0.58</p></td>
<td><p>0.58</p></td>
<td><p>0.59</p></td>
<td><p>0.71</p></td>
<td><p>1.8</p></td>
<td><p>0.56</p></td>
<td><p>0.61</p></td>
<td><p>0.54</p></td>
<td><p>0.6</p></td>
<td><p>0.52</p></td>
<td><p>0.68</p></td>
<td><p>0.66</p></td>
<td><p>0.78</p></td>
<td><p>1.6</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p>LinearRegression</p></td>
<td><p>m-reg</p></td>
<td><p>default</p></td>
<td></td>
<td><p>predict</p></td>
<td><p>0</p></td>
<td><p>{}</p></td>
<td><p>null</p></td>
<td><p>4</p></td>
<td><p>onnxruntime2</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>1</p></td>
<td><p>299</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>299</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 15/1</p></td>
<td></td>
<td><p>0.58</p></td>
<td><p>0.57</p></td>
<td><p>0.58</p></td>
<td><p>0.66</p></td>
<td><p>0.64</p></td>
<td><p>0.56</p></td>
<td><p>0.6</p></td>
<td><p>0.55</p></td>
<td><p>0.63</p></td>
<td><p>0.52</p></td>
<td><p>0.66</p></td>
<td><p>0.62</p></td>
<td><p>0.71</p></td>
<td><p>0.6</p></td>
<td><p>0.69</p></td>
</tr>
<tr class="row-even"><td><p>LinearRegression</p></td>
<td><p>~b-reg-64</p></td>
<td><p>default</p></td>
<td></td>
<td><p>predict</p></td>
<td><p>0</p></td>
<td><p>{}</p></td>
<td><p>null</p></td>
<td><p>4</p></td>
<td><p>onnxruntime2</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>4</p></td>
<td><p>1</p></td>
<td><p>363</p></td>
<td><p>3</p></td>
<td><p>3</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>-1</p></td>
<td><p>363</p></td>
<td><p>3</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 13/</p></td>
<td></td>
<td><p>1.6</p></td>
<td><p>1.7</p></td>
<td><p>1.7</p></td>
<td><p>2.2</p></td>
<td><p>5</p></td>
<td><p>1.6</p></td>
<td><p>1.7</p></td>
<td><p>1.6</p></td>
<td><p>1.8</p></td>
<td><p>1.6</p></td>
<td><p>1.8</p></td>
<td><p>2</p></td>
<td><p>2.3</p></td>
<td><p>4.8</p></td>
<td><p>5.2</p></td>
</tr>
<tr class="row-odd"><td><p>LinearRegression</p></td>
<td><p>~m-reg-64</p></td>
<td><p>default</p></td>
<td></td>
<td><p>predict</p></td>
<td><p>0</p></td>
<td><p>{}</p></td>
<td><p>null</p></td>
<td><p>4</p></td>
<td><p>onnxruntime2</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>1</p></td>
<td><p>403</p></td>
<td><p>3</p></td>
<td><p>3</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>-1</p></td>
<td><p>403</p></td>
<td><p>3</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 13/</p></td>
<td></td>
<td><p>1.7</p></td>
<td><p>1.6</p></td>
<td><p>1.7</p></td>
<td><p>1.8</p></td>
<td><p>1.9</p></td>
<td><p>1.6</p></td>
<td><p>1.7</p></td>
<td><p>1.6</p></td>
<td><p>1.7</p></td>
<td><p>1.6</p></td>
<td><p>1.8</p></td>
<td><p>1.6</p></td>
<td><p>1.9</p></td>
<td><p>1.8</p></td>
<td><p>1.9</p></td>
</tr>
<tr class="row-even"><td><p>LogisticRegression</p></td>
<td><p>b-cl</p></td>
<td><p>liblinear</p></td>
<td></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime2</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>650</p></td>
<td><p>4</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>650</p></td>
<td><p>4</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>ERR: 5ort_load</p></td>
<td><p>Unable to load node ‘ZipMap’ (output type was guessed) inputs=[(‘probabilit…</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>LogisticRegression</p></td>
<td><p>b-cl</p></td>
<td><p>liblinear</p></td>
<td><p>{‘zipmap’: False}</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{“LogisticRegression”: {“zipmap”: false}}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime2</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>494</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>494</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 15/1</p></td>
<td></td>
<td><p>0.63</p></td>
<td><p>0.64</p></td>
<td><p>0.64</p></td>
<td><p>0.76</p></td>
<td><p>0.79</p></td>
<td><p>0.61</p></td>
<td><p>0.64</p></td>
<td><p>0.62</p></td>
<td><p>0.67</p></td>
<td><p>0.59</p></td>
<td><p>0.69</p></td>
<td><p>0.71</p></td>
<td><p>0.83</p></td>
<td><p>0.61</p></td>
<td><p>1.1</p></td>
</tr>
<tr class="row-even"><td><p>LogisticRegression</p></td>
<td><p>b-cl</p></td>
<td><p>liblinear</p></td>
<td><p>onnx</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime2</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>650</p></td>
<td><p>4</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>650</p></td>
<td><p>4</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>ERR: 5ort_load</p></td>
<td><p>Unable to load node ‘ZipMap’ (output type was guessed) inputs=[(‘probabilit…</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>LogisticRegression</p></td>
<td><p>b-cl</p></td>
<td><p>liblinear</p></td>
<td><p>onnx/{‘zipmap’: False}</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{“LogisticRegression”: {“zipmap”: false}}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime2</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>494</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>494</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 15/1</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>LogisticRegression</p></td>
<td><p>m-cl</p></td>
<td><p>liblinear</p></td>
<td></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime2</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>679</p></td>
<td><p>4</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>679</p></td>
<td><p>4</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>ERR: 5ort_load</p></td>
<td><p>Unable to load node ‘ZipMap’ (output type was guessed) inputs=[(‘probabilit…</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>LogisticRegression</p></td>
<td><p>m-cl</p></td>
<td><p>liblinear</p></td>
<td><p>{‘zipmap’: False}</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{“LogisticRegression”: {“zipmap”: false}}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime2</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>521</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>521</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 15/1</p></td>
<td></td>
<td><p>0.69</p></td>
<td><p>0.66</p></td>
<td><p>0.62</p></td>
<td><p>0.49</p></td>
<td><p>0.43</p></td>
<td><p>0.66</p></td>
<td><p>0.7</p></td>
<td><p>0.63</p></td>
<td><p>0.69</p></td>
<td><p>0.54</p></td>
<td><p>0.67</p></td>
<td><p>0.47</p></td>
<td><p>0.52</p></td>
<td><p>0.42</p></td>
<td><p>0.43</p></td>
</tr>
<tr class="row-even"><td><p>LogisticRegression</p></td>
<td><p>m-cl</p></td>
<td><p>liblinear</p></td>
<td><p>onnx</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime2</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>679</p></td>
<td><p>4</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>679</p></td>
<td><p>4</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>ERR: 5ort_load</p></td>
<td><p>Unable to load node ‘ZipMap’ (output type was guessed) inputs=[(‘probabilit…</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>LogisticRegression</p></td>
<td><p>m-cl</p></td>
<td><p>liblinear</p></td>
<td><p>onnx/{‘zipmap’: False}</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{“LogisticRegression”: {“zipmap”: false}}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime2</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>521</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>521</p></td>
<td><p>2</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 15/1</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>LogisticRegression</p></td>
<td><p>~b-cl-64</p></td>
<td><p>liblinear</p></td>
<td></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime2</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1159</p></td>
<td><p>13</p></td>
<td><p>5</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>1159</p></td>
<td><p>13</p></td>
<td><p>5</p></td>
<td><p>1</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>ERR: 5ort_load</p></td>
<td><p>Unable to load node ‘ZipMap’ (output type was guessed) inputs=[(‘probabilit…</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>LogisticRegression</p></td>
<td><p>~b-cl-64</p></td>
<td><p>liblinear</p></td>
<td><p>{‘zipmap’: False}</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{“LogisticRegression”: {“zipmap”: false}}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime2</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1002</p></td>
<td><p>11</p></td>
<td><p>5</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>1002</p></td>
<td><p>11</p></td>
<td><p>5</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>-1</p></td>
<td><p>OK 13/1</p></td>
<td></td>
<td><p>3.3</p></td>
<td><p>3.4</p></td>
<td><p>3.5</p></td>
<td><p>3.7</p></td>
<td><p>4.4</p></td>
<td><p>3.2</p></td>
<td><p>3.4</p></td>
<td><p>3.3</p></td>
<td><p>3.5</p></td>
<td><p>3</p></td>
<td><p>3.7</p></td>
<td><p>3.5</p></td>
<td><p>3.9</p></td>
<td><p>4.3</p></td>
<td><p>4.6</p></td>
</tr>
<tr class="row-even"><td><p>LogisticRegression</p></td>
<td><p>~b-cl-64</p></td>
<td><p>liblinear</p></td>
<td><p>onnx</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime2</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1159</p></td>
<td><p>13</p></td>
<td><p>5</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>1159</p></td>
<td><p>13</p></td>
<td><p>5</p></td>
<td><p>1</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>ERR: 5ort_load</p></td>
<td><p>Unable to load node ‘ZipMap’ (output type was guessed) inputs=[(‘probabilit…</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>LogisticRegression</p></td>
<td><p>~b-cl-64</p></td>
<td><p>liblinear</p></td>
<td><p>onnx/{‘zipmap’: False}</p></td>
<td><p>predict_proba</p></td>
<td><p>1</p></td>
<td><p>{“LogisticRegression”: {“zipmap”: false}}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime2</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1002</p></td>
<td><p>11</p></td>
<td><p>5</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>1002</p></td>
<td><p>11</p></td>
<td><p>5</p></td>
<td><p>1</p></td>
<td><p>2</p></td>
<td><p>-1</p></td>
<td><p>OK 13/1</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>LogisticRegression</p></td>
<td><p>~b-cl-dec</p></td>
<td><p>liblinear-dec</p></td>
<td><p>{‘raw_scores’: True, ‘zipmap’: False}</p></td>
<td><p>decision_function</p></td>
<td><p>1</p></td>
<td><p>{“LogisticRegression”: {“raw_scores”: true, “zipmap”: false}}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime2</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>397</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>397</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 15/1</p></td>
<td></td>
<td><p>0.58</p></td>
<td><p>0.58</p></td>
<td><p>0.61</p></td>
<td><p>0.81</p></td>
<td><p>1.3</p></td>
<td><p>0.57</p></td>
<td><p>0.61</p></td>
<td><p>0.54</p></td>
<td><p>0.63</p></td>
<td><p>0.54</p></td>
<td><p>0.73</p></td>
<td><p>0.75</p></td>
<td><p>0.87</p></td>
<td><p>1.1</p></td>
<td><p>1.5</p></td>
</tr>
<tr class="row-odd"><td><p>LogisticRegression</p></td>
<td><p>~m-cl-dec</p></td>
<td><p>liblinear-dec</p></td>
<td><p>{‘raw_scores’: True, ‘zipmap’: False}</p></td>
<td><p>decision_function</p></td>
<td><p>1</p></td>
<td><p>{“LogisticRegression”: {“raw_scores”: true, “zipmap”: false}}</p></td>
<td><p>{“random_state”: 42, “solver”: “liblinear”}</p></td>
<td><p>4</p></td>
<td><p>onnxruntime2</p></td>
<td><p>1.0.2</p></td>
<td><p>1</p></td>
<td><p>3</p></td>
<td><p>1</p></td>
<td><p>424</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>skl2onnx</p></td>
<td><p>1.11</p></td>
<td><p>1</p></td>
<td><p>424</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>-1</p></td>
<td><p>OK 15/1</p></td>
<td></td>
<td><p>0.59</p></td>
<td><p>0.58</p></td>
<td><p>0.58</p></td>
<td><p>0.67</p></td>
<td><p>0.77</p></td>
<td><p>0.56</p></td>
<td><p>0.61</p></td>
<td><p>0.55</p></td>
<td><p>0.6</p></td>
<td><p>0.54</p></td>
<td><p>0.64</p></td>
<td><p>0.6</p></td>
<td><p>0.73</p></td>
<td><p>0.71</p></td>
<td><p>0.82</p></td>
</tr>
</tbody>
</table>
<p>Full results are available at <a class="reference internal" href="skl_converters/bench_onnxrt1.html#l-onnx-bench-onnxruntime1"><span class="std std-ref">Availability of scikit-learn model for runtime onnxruntime1</span></a>.</p>
</section>
</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="onnx.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">ONNX, Runtime, Backends</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="backends/index.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">ONNX Backends</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
    <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022, Xavier Dupré.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.4.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>