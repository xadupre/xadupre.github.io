
.. _f-xopvariable:

module ``npy.xop_variable``
===========================





.. inheritance-diagram:: mlprodict.npy.xop_variable


Short summary
+++++++++++++

module ``mlprodict.npy.xop_variable``

Xop API to build onnx graphs. Inspired from :epkg:`sklearn-onnx`.





Classes
+++++++

+-------------------------------------------------------------------------------------+-----------------------------------------------------------------------------+
| class                                                                               | truncated documentation                                                     |
+=====================================================================================+=============================================================================+
| :class:`DetectedVariable <mlprodict.npy.xop_variable.DetectedVariable>`             | Wrapper around a :class:`Variable` to detect inputs and outputs of a graph. |
+-------------------------------------------------------------------------------------+-----------------------------------------------------------------------------+
| :class:`InputDetectedVariable <mlprodict.npy.xop_variable.InputDetectedVariable>`   | Instance of :class:`DetectedVariable`. Only for inputs.                     |
+-------------------------------------------------------------------------------------+-----------------------------------------------------------------------------+
| :class:`NodeResultName <mlprodict.npy.xop_variable.NodeResultName>`                 | Defines a result name for a node.                                           |
+-------------------------------------------------------------------------------------+-----------------------------------------------------------------------------+
| :class:`OutputDetectedVariable <mlprodict.npy.xop_variable.OutputDetectedVariable>` | Instance of :class:`DetectedVariable`. Only for outputs.                    |
+-------------------------------------------------------------------------------------+-----------------------------------------------------------------------------+
| :class:`Variable <mlprodict.npy.xop_variable.Variable>`                             | An input or output to an ONNX graph.                                        |
+-------------------------------------------------------------------------------------+-----------------------------------------------------------------------------+




Functions
+++++++++

+--------------------------------------------------------------------------------+----------------------------------------------------------+
| function                                                                       | truncated documentation                                  |
+================================================================================+==========================================================+
| :func:`guess_numpy_type <mlprodict.npy.xop_variable.guess_numpy_type>`         | Guesses the corresponding numpy type based on data_type. |
+--------------------------------------------------------------------------------+----------------------------------------------------------+
| :func:`is_numpy_dtype <mlprodict.npy.xop_variable.is_numpy_dtype>`             | Tells if a dtype is a numpy dtype.                       |
+--------------------------------------------------------------------------------+----------------------------------------------------------+
| :func:`max_supported_opset <mlprodict.npy.xop_variable.max_supported_opset>`   | Returns the latest supported opset for the main domain.  |
+--------------------------------------------------------------------------------+----------------------------------------------------------+
| :func:`numpy_type_prototype <mlprodict.npy.xop_variable.numpy_type_prototype>` | Converts a numpy dtyp into a TensorProto dtype.          |
+--------------------------------------------------------------------------------+----------------------------------------------------------+




Properties
++++++++++

+-----------------------------------------------------------------------------------+------------------------------------------------------------------+
| property                                                                          | truncated documentation                                          |
+===================================================================================+==================================================================+
| :meth:`dtype <mlprodict.npy.xop_variable.Variable.dtype>`                         | Returns `self.dtype_`.                                           |
+-----------------------------------------------------------------------------------+------------------------------------------------------------------+
| :meth:`name <mlprodict.npy.xop_variable.DetectedVariable.name>`                   | Returns variable name.                                           |
+-----------------------------------------------------------------------------------+------------------------------------------------------------------+
| :meth:`name <mlprodict.npy.xop_variable.InputDetectedVariable.name>`              | Returns variable name.                                           |
+-----------------------------------------------------------------------------------+------------------------------------------------------------------+
| :meth:`name <mlprodict.npy.xop_variable.OutputDetectedVariable.name>`             | Returns variable name.                                           |
+-----------------------------------------------------------------------------------+------------------------------------------------------------------+
| :meth:`name <mlprodict.npy.xop_variable.Variable.name>`                           | Returns the variable name (`self.name_`).                        |
+-----------------------------------------------------------------------------------+------------------------------------------------------------------+
| :meth:`proto_added_shape <mlprodict.npy.xop_variable.Variable.proto_added_shape>` | Returns the shape for `self.added_shape_` or `self.shape`.       |
+-----------------------------------------------------------------------------------+------------------------------------------------------------------+
| :meth:`proto_added_type <mlprodict.npy.xop_variable.Variable.proto_added_type>`   | Returns the proto type for `self.added_dtype_` or `self.dtype_`. |
+-----------------------------------------------------------------------------------+------------------------------------------------------------------+
| :meth:`proto_type <mlprodict.npy.xop_variable.Variable.proto_type>`               | Returns the proto type for `self.dtype_`.                        |
+-----------------------------------------------------------------------------------+------------------------------------------------------------------+
| :meth:`shape <mlprodict.npy.xop_variable.Variable.shape>`                         | Returns `self.shape_`.                                           |
+-----------------------------------------------------------------------------------+------------------------------------------------------------------+




Static Methods
++++++++++++++

+---------------------------------------------------------------------------+---------------------------------------------------------+
| staticmethod                                                              | truncated documentation                                 |
+===========================================================================+=========================================================+
| :meth:`from_pb <mlprodict.npy.xop_variable.Variable.from_pb>`             | Creates a Variable from a protobuf object.              |
+---------------------------------------------------------------------------+---------------------------------------------------------+
| :meth:`from_skl2onnx <mlprodict.npy.xop_variable.Variable.from_skl2onnx>` | Converts var from :epkg:`sklearn-onnx` into this class. |
+---------------------------------------------------------------------------+---------------------------------------------------------+




Methods
+++++++

+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------+
| method                                                                           | truncated documentation                                                          |
+==================================================================================+==================================================================================+
| :py:meth:`__eq__ <mlprodict.npy.xop_variable.Variable.__eq__>`                   | Compares every attributes.                                                       |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------+
| :py:meth:`__init__ <mlprodict.npy.xop_variable.DetectedVariable.__init__>`       |                                                                                  |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------+
| :py:meth:`__init__ <mlprodict.npy.xop_variable.InputDetectedVariable.__init__>`  |                                                                                  |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------+
| :py:meth:`__init__ <mlprodict.npy.xop_variable.NodeResultName.__init__>`         |                                                                                  |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------+
| :py:meth:`__init__ <mlprodict.npy.xop_variable.OutputDetectedVariable.__init__>` |                                                                                  |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------+
| :py:meth:`__init__ <mlprodict.npy.xop_variable.Variable.__init__>`               |                                                                                  |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------+
| :py:meth:`__repr__ <mlprodict.npy.xop_variable.DetectedVariable.__repr__>`       | usual                                                                            |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------+
| :py:meth:`__repr__ <mlprodict.npy.xop_variable.InputDetectedVariable.__repr__>`  | usual                                                                            |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------+
| :py:meth:`__repr__ <mlprodict.npy.xop_variable.NodeResultName.__repr__>`         | Usual                                                                            |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------+
| :py:meth:`__repr__ <mlprodict.npy.xop_variable.OutputDetectedVariable.__repr__>` | usual                                                                            |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------+
| :py:meth:`__repr__ <mlprodict.npy.xop_variable.Variable.__repr__>`               | usual                                                                            |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------+
| :meth:`copy_add <mlprodict.npy.xop_variable.Variable.copy_add>`                  | Returns a copy of this variable with a new dtype.                                |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------+
| :meth:`copy_merge <mlprodict.npy.xop_variable.Variable.copy_merge>`              | Merges information from both Variable.                                           |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------+
| :meth:`copy_name <mlprodict.npy.xop_variable.Variable.copy_name>`                | Returns a copy with a new name.                                                  |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------+
| :meth:`get_name <mlprodict.npy.xop_variable.NodeResultName.get_name>`            | Returns a name from output_names or a suggestion for a name.                     |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------+
| :meth:`is_named <mlprodict.npy.xop_variable.Variable.is_named>`                  | Tells the variable is named like that.                                           |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------+
| :meth:`make_value_info <mlprodict.npy.xop_variable.Variable.make_value_info>`    | Converts the variable into `onnx.ValueInfoProto`.                                |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------+
| :meth:`to_skl2onnx <mlprodict.npy.xop_variable.Variable.to_skl2onnx>`            | Converts this instance into an instance of *Variable* from :epkg:`sklearn-onnx`. |
+----------------------------------------------------------------------------------+----------------------------------------------------------------------------------+


Documentation
+++++++++++++

.. automodule:: mlprodict.npy.xop_variable
    :members:
    :special-members: __init__
    :show-inheritance:



