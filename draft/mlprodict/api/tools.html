
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Tools &#8212; Python Runtime for ONNX</title>
    
    <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
  
    
    <link rel="stylesheet"
      href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">
  
    
      
  
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/pydata-sphinx-theme.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/style_notebook_snippet.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinxtrib-images/LightBox2/lightbox2/css/lightbox.css" />
    <link rel="stylesheet" type="text/css" href="../_static/my-styles.css" />
    
    <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">
  
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/thebelab-helper.js"></script>
    <script src="../_static/require.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
    <script src="../_static/sphinxtrib-images/LightBox2/lightbox2/js/jquery-1.11.0.min.js"></script>
    <script src="../_static/sphinxtrib-images/LightBox2/lightbox2/js/lightbox.min.js"></script>
    <script src="../_static/sphinxtrib-images/LightBox2/lightbox2_customize/jquery-noconflict.js"></script>
    <link rel="shortcut icon" href="../_static/project_ico.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Former Experiments" href="cc_grammar.html" />
    <link rel="prev" title="Validation" href="validation.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../index.html">
  <img src="../_static/project_ico.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../installation.html">
  Installation
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../tutorial/index.html">
  Tutorial
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  API
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../onnx.html">
  ONNX, Runtime, Backends
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../onnx_bench.html">
  scikit-learn Converters and Benchmarks
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../i_cmd.html">
  Command lines
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../i_ex.html">
  Examples
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../i_index.html">
  FAQ, code, …
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../gyexamples/index.html">
  Gallery of examples
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../all_notebooks.html">
  Notebook Gallery
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../HISTORY.html">
  History
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="onnx_conv.html">
   Additional ONNX Converters
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="sklapi.html">
   scikit-learn API and ONNX graph in pipelines
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="npy.html">
   Complete Numpy API for ONNX
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="xop.html">
   Xop API
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ast.html">
   AST
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="onnxrt.html">
   Python Runtime for ONNX
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="onnxrt_ops.html">
   Python Runtime for ONNX operators
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="testing.html">
   Experimental implementations
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="asv.html">
   Benchmarking with asv
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="validation.html">
   Validation
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Tools
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="cc_grammar.html">
   Former Experiments
  </a>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#onnx">
   ONNX
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#accessor">
     Accessor
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#export">
     Export
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#graphs-helper-manipulations">
     Graphs helper, manipulations
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#onnx-optimization">
     Onnx Optimization
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#profiling">
     Profiling
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#serialization">
     Serialization
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#validation-of-scikit-learn-models">
     Validation of scikit-learn models
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#visualization">
     Visualization
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#others">
   Others
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#scikit-learn">
     scikit-learn
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#versions">
     Versions
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#type-conversion">
   Type conversion
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#skl2onnx">
   skl2onnx
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="tools">
<h1>Tools<a class="headerlink" href="#tools" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#onnx" id="id1">ONNX</a></p>
<ul>
<li><p><a class="reference internal" href="#accessor" id="id2">Accessor</a></p></li>
<li><p><a class="reference internal" href="#export" id="id3">Export</a></p></li>
<li><p><a class="reference internal" href="#graphs-helper-manipulations" id="id4">Graphs helper, manipulations</a></p></li>
<li><p><a class="reference internal" href="#onnx-optimization" id="id5">Onnx Optimization</a></p></li>
<li><p><a class="reference internal" href="#profiling" id="id6">Profiling</a></p></li>
<li><p><a class="reference internal" href="#serialization" id="id7">Serialization</a></p></li>
<li><p><a class="reference internal" href="#validation-of-scikit-learn-models" id="id8">Validation of scikit-learn models</a></p></li>
<li><p><a class="reference internal" href="#visualization" id="id9">Visualization</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#others" id="id10">Others</a></p>
<ul>
<li><p><a class="reference internal" href="#scikit-learn" id="id11">scikit-learn</a></p></li>
<li><p><a class="reference internal" href="#versions" id="id12">Versions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#type-conversion" id="id13">Type conversion</a></p></li>
<li><p><a class="reference internal" href="#skl2onnx" id="id14">skl2onnx</a></p></li>
</ul>
</div>
<section id="onnx">
<h2><a class="toc-backref" href="#id1">ONNX</a><a class="headerlink" href="#onnx" title="Permalink to this headline">¶</a></h2>
<section id="accessor">
<h3><a class="toc-backref" href="#id2">Accessor</a><a class="headerlink" href="#accessor" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../mlprodict/onnx_tools/onnx_tools.html#mlprodict.onnx_tools.onnx_tools.find_node_input_name" title="mlprodict.onnx_tools.onnx_tools.find_node_input_name"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.onnx_tools.find_node_input_name</span></code></a> (<em>node</em>, <em>name</em>)</p>
<blockquote>
<div><p>Finds a node input by its name.</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/onnx_tools/onnx_tools.html#mlprodict.onnx_tools.onnx_tools.find_node_name" title="mlprodict.onnx_tools.onnx_tools.find_node_name"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.onnx_tools.find_node_name</span></code></a> (<em>model</em>, <em>name</em>)</p>
<blockquote>
<div><p>Finds a node by its name.</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/onnx_tools/onnx_tools.html#mlprodict.onnx_tools.onnx_tools.insert_node" title="mlprodict.onnx_tools.onnx_tools.insert_node"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.onnx_tools.insert_node</span></code></a> (<em>model</em>, <em>op_type</em>, <em>node</em>, <em>input_index</em> = <cite>0</cite>, <em>new_name</em> = <cite>None</cite>, <em>attrs</em>)</p>
<blockquote>
<div><p>Inserts a node before one node input.</p>
</div></blockquote>
</section>
<section id="export">
<h3><a class="toc-backref" href="#id3">Export</a><a class="headerlink" href="#export" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../mlprodict/onnx_tools/onnx_export.html#mlprodict.onnx_tools.onnx_export.export2numpy" title="mlprodict.onnx_tools.onnx_export.export2numpy"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.onnx_export.export2numpy</span></code></a> (<em>model_onnx</em>, <em>opset</em> = <cite>None</cite>, <em>verbose</em> = <cite>True</cite>, <em>name</em> = <cite>None</cite>, <em>rename</em> = <cite>False</cite>, <em>autopep_options</em> = <cite>None</cite>)</p>
<blockquote>
<div><p>Exports an ONNX model to the <a class="reference external" href="https://www.numpy.org/">numpy</a> syntax.
The exports does not work with all operators.</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/onnx_tools/onnx_export.html#mlprodict.onnx_tools.onnx_export.export2onnx" title="mlprodict.onnx_tools.onnx_export.export2onnx"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.onnx_export.export2onnx</span></code></a> (<em>model_onnx</em>, <em>opset</em> = <cite>None</cite>, <em>verbose</em> = <cite>True</cite>, <em>name</em> = <cite>None</cite>, <em>rename</em> = <cite>False</cite>, <em>autopep_options</em> = <cite>None</cite>)</p>
<blockquote>
<div><p>Exports an ONNX model to the <a class="reference external" href="https://github.com/onnx/onnx">onnx</a> syntax.</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/onnx_tools/onnx_export.html#mlprodict.onnx_tools.onnx_export.export2tf2onnx" title="mlprodict.onnx_tools.onnx_export.export2tf2onnx"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.onnx_export.export2tf2onnx</span></code></a> (<em>model_onnx</em>, <em>opset</em> = <cite>None</cite>, <em>verbose</em> = <cite>True</cite>, <em>name</em> = <cite>None</cite>, <em>rename</em> = <cite>False</cite>, <em>autopep_options</em> = <cite>None</cite>)</p>
<blockquote>
<div><p>Exports an ONNX model to the <a class="reference external" href="https://github.com/onnx/tensorflow-onnx">tensorflow-onnx</a> syntax.</p>
</div></blockquote>
</section>
<section id="graphs-helper-manipulations">
<h3><a class="toc-backref" href="#id4">Graphs helper, manipulations</a><a class="headerlink" href="#graphs-helper-manipulations" title="Permalink to this headline">¶</a></h3>
<p>Functions to help understand models or modify them.</p>
<p><a class="reference internal" href="../mlprodict/tools/model_info.html#mlprodict.tools.model_info.analyze_model" title="mlprodict.tools.model_info.analyze_model"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.tools.model_info.analyze_model</span></code></a> (<em>model</em>, <em>simplify</em> = <cite>True</cite>)</p>
<blockquote>
<div><p>Returns informations, statistics about a model,
its number of nodes, its size…</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/onnx_tools/onnx_manipulations.html#mlprodict.onnx_tools.onnx_manipulations.insert_results_into_onnx" title="mlprodict.onnx_tools.onnx_manipulations.insert_results_into_onnx"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.onnx_manipulations.insert_results_into_onnx</span></code></a> (<em>model</em>, <em>results</em>, <em>as_parameter</em> = <cite>True</cite>, <em>suffix</em> = <cite>‘_DBG’</cite>, <em>param_name</em> = <cite>None</cite>, <em>node_type</em> = <cite>‘DEBUG’</cite>, <em>domain</em> = <cite>‘DEBUG’</cite>, <em>domain_opset</em> = <cite>1</cite>)</p>
<blockquote>
<div><p>Inserts results into an ONNX graph to produce an extended
ONNX graph. It can saved and looked into with a tool such as
<a class="reference external" href="https://github.com/lutzroeder/netron">netron</a>.</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/onnx_tools/onnx_manipulations.html#mlprodict.onnx_tools.onnx_manipulations.enumerate_model_node_outputs" title="mlprodict.onnx_tools.onnx_manipulations.enumerate_model_node_outputs"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.onnx_manipulations.enumerate_model_node_outputs</span></code></a> (<em>model</em>, <em>add_node</em> = <cite>False</cite>, <em>order</em> = <cite>False</cite>)</p>
<blockquote>
<div><p>Enumerates all the nodes of a model.</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/tools/code_helper.html#mlprodict.tools.code_helper.make_callable" title="mlprodict.tools.code_helper.make_callable"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.tools.code_helper.make_callable</span></code></a> (<em>fct</em>, <em>obj</em>, <em>code</em>, <em>gl</em>, <em>debug</em>)</p>
<blockquote>
<div><p>Creates a callable function able to
cope with default values as the combination
of functions <em>compile</em> and <em>exec</em> does not seem
able to take them into account.</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/onnx_tools/model_checker.html#mlprodict.onnx_tools.model_checker.onnx_shaker" title="mlprodict.onnx_tools.model_checker.onnx_shaker"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.model_checker.onnx_shaker</span></code></a> (<em>oinf</em>, <em>inputs</em>, <em>output_fct</em>, <em>n</em> = <cite>100</cite>, <em>dtype</em> = <cite>&lt;class ‘numpy.float32’&gt;</cite>, <em>force</em> = <cite>1</cite>)</p>
<blockquote>
<div><p>Shakes a model <a class="reference external" href="https://onnx.ai/">ONNX</a>.
Explores the ranges for every prediction.
Uses <a class="reference internal" href="../mlprodict/onnx_tools/model_checker.html#mlprodict.onnx_tools.model_checker.astype_range" title="mlprodict.onnx_tools.model_checker.astype_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">astype_range</span></code></a></p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/onnx_tools/optim/onnx_helper.html#mlprodict.onnx_tools.optim.onnx_helper.onnx_statistics" title="mlprodict.onnx_tools.optim.onnx_helper.onnx_statistics"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.optim.onnx_statistics</span></code></a> (<em>onnx_model</em>, <em>recursive</em> = <cite>True</cite>, <em>optim</em> = <cite>True</cite>, <em>node_type</em> = <cite>False</cite>)</p>
<blockquote>
<div><p>Computes statistics on <a class="reference external" href="https://onnx.ai/">ONNX</a> models,
extracts informations about the model such as
the number of nodes.</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/onnx_tools/onnx_manipulations.html#mlprodict.onnx_tools.onnx_manipulations.select_model_inputs_outputs" title="mlprodict.onnx_tools.onnx_manipulations.select_model_inputs_outputs"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.onnx_manipulations.select_model_inputs_outputs</span></code></a> (<em>model</em>, <em>outputs</em> = <cite>None</cite>, <em>inputs</em> = <cite>None</cite>, <em>infer_shapes</em> = <cite>False</cite>, <em>overwrite</em> = <cite>None</cite>, <em>remove_unused</em> = <cite>True</cite>, <em>verbose</em> = <cite>0</cite>, <em>fLOG</em> = <cite>None</cite>)</p>
<blockquote>
<div><p>Takes a model and changes its outputs.</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/testing/verify_code.html#mlprodict.testing.verify_code.verify_code" title="mlprodict.testing.verify_code.verify_code"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.testing.verify_code</span></code></a> (<em>source</em>, <em>exc</em> = <cite>True</cite>)</p>
<blockquote>
<div><p>Verifies <a class="reference external" href="https://www.python.org/">python</a> code.</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/testing/script_testing.html#mlprodict.testing.script_testing.verify_script" title="mlprodict.testing.script_testing.verify_script"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.testing.script_testing.verify_script</span></code></a> (<em>file_or_name</em>, <em>try_onnx</em> = <cite>True</cite>, <em>existing_loc</em> = <cite>None</cite>, <em>options</em>)</p>
<blockquote>
<div><p>Checks that models fitted in an example from <a class="reference external" href="https://scikit-learn.org/stable/">scikit-learn</a>
documentation can be converted into <a class="reference external" href="https://onnx.ai/">ONNX</a>.</p>
</div></blockquote>
</section>
<section id="onnx-optimization">
<h3><a class="toc-backref" href="#id5">Onnx Optimization</a><a class="headerlink" href="#onnx-optimization" title="Permalink to this headline">¶</a></h3>
<p>The following functions reduce the number of ONNX operators in a graph
while keeping the same results. The optimized graph
is left unchanged.</p>
<p><a class="reference internal" href="../mlprodict/onnx_tools/onnx_tools.html#mlprodict.onnx_tools.onnx_tools.ensure_topological_order" title="mlprodict.onnx_tools.onnx_tools.ensure_topological_order"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.onnx_tools.ensure_topological_order</span></code></a> (<em>inputs</em>, <em>initializers</em>, <em>nodes</em>)</p>
<blockquote>
<div><p>Ensures and modifies the order of nodes to have
a topological order (every node in the list
can only be an input for a node later in this list).
The function raises an exception if a cycle is detected.</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/onnx_tools/onnx_manipulations.html#mlprodict.onnx_tools.onnx_manipulations.onnx_rename_names" title="mlprodict.onnx_tools.onnx_manipulations.onnx_rename_names"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.onnx_manipulations.onnx_rename_names</span></code></a> (<em>model</em>, <em>strategy</em> = <cite>‘simple’</cite>, <em>recursive</em> = <cite>True</cite>, <em>verbose</em> = <cite>0</cite>, <em>fLOG</em> = <cite>&lt;built-in function print&gt;</cite>, <em>counts</em> = <cite>None</cite>, <em>replace</em> = <cite>None</cite>, <em>taken</em> = <cite>None</cite>)</p>
<blockquote>
<div><p>Renames all names except the inputs and outputs.</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/onnx_tools/optim/onnx_optimisation.html#mlprodict.onnx_tools.optim.onnx_optimisation.onnx_remove_node" title="mlprodict.onnx_tools.optim.onnx_optimisation.onnx_remove_node"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.optim.onnx_remove_node</span></code></a> (<em>onnx_model</em>, <em>recursive</em> = <cite>True</cite>, <em>debug_info</em> = <cite>None</cite>, <em>options</em>)</p>
<blockquote>
<div><p>Removes as many nodes as possible without changing
the outcome. It applies <a class="reference internal" href="../mlprodict/onnx_tools/optim/onnx_optimisation_unused.html#mlprodict.onnx_tools.optim.onnx_optimisation_unused.onnx_remove_node_unused" title="mlprodict.onnx_tools.optim.onnx_optimisation_unused.onnx_remove_node_unused"><code class="xref py py-func docutils literal notranslate"><span class="pre">onnx_remove_node_unused</span></code></a>,
<a class="reference internal" href="../mlprodict/onnx_tools/optim/onnx_optimisation_identity.html#mlprodict.onnx_tools.optim.onnx_optimisation_identity.onnx_remove_node_identity" title="mlprodict.onnx_tools.optim.onnx_optimisation_identity.onnx_remove_node_identity"><code class="xref py py-func docutils literal notranslate"><span class="pre">onnx_remove_node_identity</span></code></a>,
and <a class="reference internal" href="../mlprodict/onnx_tools/optim/onnx_optimisation_redundant.html#mlprodict.onnx_tools.optim.onnx_optimisation_redundant.onnx_remove_node_redundant" title="mlprodict.onnx_tools.optim.onnx_optimisation_redundant.onnx_remove_node_redundant"><code class="xref py py-func docutils literal notranslate"><span class="pre">onnx_remove_node_redundant</span></code></a>.</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/onnx_tools/optim/_main_onnx_optim.html#mlprodict.onnx_tools.optim._main_onnx_optim.onnx_optimisations" title="mlprodict.onnx_tools.optim._main_onnx_optim.onnx_optimisations"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.optim.onnx_optimisations</span></code></a> (<em>onnx_model</em>, <em>recursive</em> = <cite>True</cite>, <em>debug_info</em> = <cite>None</cite>, <em>options</em>)</p>
<blockquote>
<div><p>Calls several possible optimisations including
<a class="reference internal" href="../mlprodict/onnx_tools/optim/onnx_optimisation.html#mlprodict.onnx_tools.optim.onnx_optimisation.onnx_remove_node" title="mlprodict.onnx_tools.optim.onnx_optimisation.onnx_remove_node"><code class="xref py py-func docutils literal notranslate"><span class="pre">onnx_remove_node</span></code></a>.</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/onnx_tools/optim/onnx_optimisation_identity.html#mlprodict.onnx_tools.optim.onnx_optimisation_identity.onnx_remove_node_identity" title="mlprodict.onnx_tools.optim.onnx_optimisation_identity.onnx_remove_node_identity"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.optim.onnx_remove_node_identity</span></code></a> (<em>onnx_model</em>, <em>recursive</em> = <cite>True</cite>, <em>debug_info</em> = <cite>None</cite>, <em>options</em>)</p>
<blockquote>
<div><p>Removes as many <em>Identity</em> nodes as possible.
The function looks into every node and subgraphs if
<em>recursive</em> is True for identity node. Unless such a
node directy connects one input to one output, it will
be removed and every other node gets its inputs or
outputs accordingly renamed.</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/onnx_tools/optim/onnx_optimisation_redundant.html#mlprodict.onnx_tools.optim.onnx_optimisation_redundant.onnx_remove_node_redundant" title="mlprodict.onnx_tools.optim.onnx_optimisation_redundant.onnx_remove_node_redundant"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.optim.onnx_remove_node_redundant</span></code></a> (<em>onnx_model</em>, <em>recursive</em> = <cite>True</cite>, <em>debug_info</em> = <cite>None</cite>, <em>max_hash_size</em> = <cite>1000</cite>, <em>options</em>)</p>
<blockquote>
<div><p>Removes redundant part of the graph. A redundant part is
a set of nodes which takes the same inputs and produces
the same outputs. It first starts by looking into duplicated
initializers, then looks into nodes taking the same inputs
and sharing the same type and parameters.</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/onnx_tools/optim/onnx_optimisation_unused.html#mlprodict.onnx_tools.optim.onnx_optimisation_unused.onnx_remove_node_unused" title="mlprodict.onnx_tools.optim.onnx_optimisation_unused.onnx_remove_node_unused"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.optim.onnx_remove_node_unused</span></code></a> (<em>onnx_model</em>, <em>recursive</em> = <cite>True</cite>, <em>debug_info</em> = <cite>None</cite>, <em>options</em>)</p>
<blockquote>
<div><p>Removes unused nodes of the graph. An unused node
is not involved in the output computation.</p>
</div></blockquote>
</section>
<section id="profiling">
<h3><a class="toc-backref" href="#id6">Profiling</a><a class="headerlink" href="#profiling" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../mlprodict/tools/ort_wrapper.html#mlprodict.tools.ort_wrapper.prepare_c_profiling" title="mlprodict.tools.ort_wrapper.prepare_c_profiling"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.tools.ort_wrapper.prepare_c_profiling</span></code></a> (<em>model_onnx</em>, <em>inputs</em>, <em>dest</em> = <cite>None</cite>)</p>
<blockquote>
<div><p>Prepares model and data to be profiled with tool <a class="reference external" href="https://github.com/microsoft/onnxruntime/tree/master/onnxruntime/test/perftest">perftest</a> (onnxruntime) or
<a class="reference external" href="https://github.com/microsoft/onnxruntime/blob/master/docs/Model_Test.md">onnx_test_runner</a>.
It saves the model in folder
<em>dest</em> and dumps the inputs in a subfolder.</p>
</div></blockquote>
</section>
<section id="serialization">
<h3><a class="toc-backref" href="#id7">Serialization</a><a class="headerlink" href="#serialization" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../mlprodict/onnx_tools/onnx2py_helper.html#mlprodict.onnx_tools.onnx2py_helper.from_bytes" title="mlprodict.onnx_tools.onnx2py_helper.from_bytes"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.onnx2py_helper.from_bytes</span></code></a> (<em>b</em>)</p>
<blockquote>
<div><p>Retrieves an array from bytes then protobuf.</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/onnx_tools/onnx2py_helper.html#mlprodict.onnx_tools.onnx2py_helper.to_bytes" title="mlprodict.onnx_tools.onnx2py_helper.to_bytes"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.onnx2py_helper.to_bytes</span></code></a> (<em>val</em>)</p>
<blockquote>
<div><p>Converts an array into protobuf and then into bytes.</p>
</div></blockquote>
</section>
<section id="validation-of-scikit-learn-models">
<h3><a class="toc-backref" href="#id8">Validation of scikit-learn models</a><a class="headerlink" href="#validation-of-scikit-learn-models" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../mlprodict/onnxrt/validate/validate.html#mlprodict.onnxrt.validate.validate.enumerate_validated_operator_opsets" title="mlprodict.onnxrt.validate.validate.enumerate_validated_operator_opsets"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnxrt.validate.enumerate_validated_operator_opsets</span></code></a> (<em>verbose</em> = <cite>0</cite>, <em>opset_min</em> = <cite>-1</cite>, <em>opset_max</em> = <cite>-1</cite>, <em>check_runtime</em> = <cite>True</cite>, <em>debug</em> = <cite>False</cite>, <em>runtime</em> = <cite>‘python’</cite>, <em>models</em> = <cite>None</cite>, <em>dump_folder</em> = <cite>None</cite>, <em>store_models</em> = <cite>False</cite>, <em>benchmark</em> = <cite>False</cite>, <em>skip_models</em> = <cite>None</cite>, <em>assume_finite</em> = <cite>True</cite>, <em>node_time</em> = <cite>False</cite>, <em>fLOG</em> = <cite>&lt;built-in function print&gt;</cite>, <em>filter_exp</em> = <cite>None</cite>, <em>versions</em> = <cite>False</cite>, <em>extended_list</em> = <cite>False</cite>, <em>time_kwargs</em> = <cite>None</cite>, <em>dump_all</em> = <cite>False</cite>, <em>n_features</em> = <cite>None</cite>, <em>skip_long_test</em> = <cite>True</cite>, <em>fail_bad_results</em> = <cite>False</cite>, <em>filter_scenario</em> = <cite>None</cite>, <em>time_kwargs_fact</em> = <cite>None</cite>, <em>time_limit</em> = <cite>4</cite>, <em>n_jobs</em> = <cite>None</cite>)</p>
<blockquote>
<div><p>Tests all possible configurations for all possible
operators and returns the results.</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/onnx_tools/model_checker.html#mlprodict.onnx_tools.model_checker.onnx_shaker" title="mlprodict.onnx_tools.model_checker.onnx_shaker"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.model_checker.onnx_shaker</span></code></a> (<em>oinf</em>, <em>inputs</em>, <em>output_fct</em>, <em>n</em> = <cite>100</cite>, <em>dtype</em> = <cite>&lt;class ‘numpy.float32’&gt;</cite>, <em>force</em> = <cite>1</cite>)</p>
<blockquote>
<div><p>Shakes a model <a class="reference external" href="https://onnx.ai/">ONNX</a>.
Explores the ranges for every prediction.
Uses <a class="reference internal" href="../mlprodict/onnx_tools/model_checker.html#mlprodict.onnx_tools.model_checker.astype_range" title="mlprodict.onnx_tools.model_checker.astype_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">astype_range</span></code></a></p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/onnxrt/validate/side_by_side.html#mlprodict.onnxrt.validate.side_by_side.side_by_side_by_values" title="mlprodict.onnxrt.validate.side_by_side.side_by_side_by_values"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnxrt.validate.side_by_side.side_by_side_by_values</span></code></a> (<em>sessions</em>, <em>args</em>, <em>inputs</em> = <cite>None</cite>, <em>return_results</em> = <cite>False</cite>, <em>kwargs</em>)</p>
<blockquote>
<div><p>Compares the execution of two sessions.
It calls method <a class="reference internal" href="../mlprodict/onnxrt/onnx_inference.html#mlprodict.onnxrt.onnx_inference.OnnxInference.run" title="mlprodict.onnxrt.onnx_inference.OnnxInference.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">OnnxInference.run</span></code></a>
with value <code class="docutils literal notranslate"><span class="pre">intermediate=True</span></code> and compares the results.</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/onnxrt/validate/validate_summary.html#mlprodict.onnxrt.validate.validate_summary.summary_report" title="mlprodict.onnxrt.validate.validate_summary.summary_report"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnxrt.validate.summary_report</span></code></a> (<em>df</em>, <em>add_cols</em> = <cite>None</cite>, <em>add_index</em> = <cite>None</cite>)</p>
<blockquote>
<div><p>Finalizes the results computed by function
<a class="reference internal" href="../mlprodict/onnxrt/validate/validate.html#mlprodict.onnxrt.validate.validate.enumerate_validated_operator_opsets" title="mlprodict.onnxrt.validate.validate.enumerate_validated_operator_opsets"><code class="xref py py-func docutils literal notranslate"><span class="pre">enumerate_validated_operator_opsets</span></code></a>.</p>
</div></blockquote>
</section>
<section id="visualization">
<h3><a class="toc-backref" href="#id9">Visualization</a><a class="headerlink" href="#visualization" title="Permalink to this headline">¶</a></h3>
<p id="index-0">Many times I had to debug and I was thinking about a way to see
a graph in a text editor. That’s the goal of this function with
the possibility later to only show a part of a graph.</p>
<p><strong>text</strong></p>
<p><a class="reference internal" href="../mlprodict/plotting/text_plot.html#mlprodict.plotting.text_plot.onnx_simple_text_plot" title="mlprodict.plotting.text_plot.onnx_simple_text_plot"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.plotting.text_plot.onnx_simple_text_plot</span></code></a> (<em>model</em>, <em>verbose</em> = <cite>False</cite>, <em>att_display</em> = <cite>None</cite>, <em>add_links</em> = <cite>False</cite>, <em>recursive</em> = <cite>False</cite>, <em>functions</em> = <cite>True</cite>)</p>
<blockquote>
<div><p>Displays an ONNX graph into text.</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/plotting/text_plot.html#mlprodict.plotting.text_plot.onnx_text_plot" title="mlprodict.plotting.text_plot.onnx_text_plot"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.plotting.text_plot.onnx_text_plot</span></code></a> (<em>model_onnx</em>, <em>recursive</em> = <cite>False</cite>, <em>graph_type</em> = <cite>‘basic’</cite>, <em>grid</em> = <cite>5</cite>, <em>distance</em> = <cite>5</cite>)</p>
<blockquote>
<div><p>Uses <a class="reference internal" href="../mlprodict/tools/graphs.html#mlprodict.tools.graphs.onnx2bigraph" title="mlprodict.tools.graphs.onnx2bigraph"><code class="xref py py-func docutils literal notranslate"><span class="pre">onnx2bigraph</span></code></a> to convert the ONNX graph
into text.</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/plotting/text_plot.html#mlprodict.plotting.text_plot.onnx_text_plot_tree" title="mlprodict.plotting.text_plot.onnx_text_plot_tree"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.plotting.text_plot.onnx_text_plot_tree</span></code></a> (<em>node</em>)</p>
<blockquote>
<div><p>Gives a textual representation of a tree ensemble.</p>
</div></blockquote>
<p><strong>drawings</strong></p>
<p><a class="reference internal" href="../mlprodict/plotting/plotting_onnx.html#mlprodict.plotting.plotting_onnx.plot_onnx" title="mlprodict.plotting.plotting_onnx.plot_onnx"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.plotting.plotting_onnx.plot_onnx</span></code></a> (<em>onx</em>, <em>ax</em> = <cite>None</cite>, <em>dpi</em> = <cite>300</cite>, <em>temp_dot</em> = <cite>None</cite>, <em>temp_img</em> = <cite>None</cite>, <em>show</em> = <cite>False</cite>)</p>
<blockquote>
<div><p>Plots an ONNX graph into a <a class="reference external" href="https://matplotlib.org/index.html">matplotlib</a> graph.</p>
</div></blockquote>
<p><strong>notebook</strong></p>
<p><a class="reference internal" href="../i_nb.html#l-nb2"><span class="std std-ref">onnxview</span></a>, see also <a class="reference internal" href="../notebooks/numpy_api_onnx_ftr.html#numpyapionnxftrrst"><span class="std std-ref">Introduction to a numpy API for ONNX: FunctionTransformer</span></a>.</p>
<p><strong>benchmark</strong></p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.plotting.plot_validate_benchmark</span></code></p>
<p><a class="reference internal" href="../mlprodict/plotting/plotting_benchmark.html#mlprodict.plotting.plotting_benchmark.plot_benchmark_metrics" title="mlprodict.plotting.plotting_benchmark.plot_benchmark_metrics"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.plotting.plotting_benchmark.plot_benchmark_metrics</span></code></a> (<em>metric</em>, <em>xlabel</em> = <cite>None</cite>, <em>ylabel</em> = <cite>None</cite>, <em>middle</em> = <cite>1.0</cite>, <em>transpose</em> = <cite>False</cite>, <em>ax</em> = <cite>None</cite>, <em>cbar_kw</em> = <cite>None</cite>, <em>cbarlabel</em> = <cite>None</cite>, <em>valfmt</em> = <cite>‘{x:.2f}x’</cite>)</p>
<blockquote>
<div><p>Plots a heatmap which represents a benchmark.
See example below.</p>
</div></blockquote>
<p><strong>notebook</strong></p>
<p><a class="reference internal" href="../mlprodict/nb_helper.html#mlprodict.nb_helper.onnxview" title="mlprodict.nb_helper.onnxview"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.nb_helper.onnxview</span></code></a> (<em>graph</em>, <em>recursive</em> = <cite>False</cite>, <em>local</em> = <cite>False</cite>, <em>add_rt_shapes</em> = <cite>False</cite>, <em>runtime</em> = <cite>‘python’</cite>, <em>size</em> = <cite>None</cite>, <em>html_size</em> = <cite>None</cite>)</p>
<blockquote>
<div><p>Displays an <a class="reference external" href="https://onnx.ai/">ONNX</a> graph into a notebook.</p>
</div></blockquote>
</section>
</section>
<section id="others">
<h2><a class="toc-backref" href="#id10">Others</a><a class="headerlink" href="#others" title="Permalink to this headline">¶</a></h2>
<section id="scikit-learn">
<h3><a class="toc-backref" href="#id11">scikit-learn</a><a class="headerlink" href="#scikit-learn" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../mlprodict/grammar_sklearn/g_sklearn_main.html#mlprodict.grammar_sklearn.g_sklearn_main.sklearn2graph" title="mlprodict.grammar_sklearn.g_sklearn_main.sklearn2graph"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.grammar_sklearn.sklearn2graph</span></code></a> (<em>model</em>, <em>output_names</em> = <cite>None</cite>, <em>kwargs</em>)</p>
<blockquote>
<div><p>Converts any kind of <em>scikit-learn</em> model into a <em>grammar</em> model.</p>
</div></blockquote>
</section>
<section id="versions">
<h3><a class="toc-backref" href="#id12">Versions</a><a class="headerlink" href="#versions" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../mlprodict/__init__.html#mlprodict.get_ir_version" title="mlprodict.get_ir_version"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.get_ir_version</span></code></a> (<em>opv</em>)</p>
<blockquote>
<div><p>Returns the corresponding <cite>IR_VERSION</cite> based on the selected opset.
See <a class="reference external" href="https://github.com/onnx/onnx/blob/main/docs/Versioning.md#released-versions">ONNX Version</a>.</p>
</div></blockquote>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.__max_supported_opset__</span></code></p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.__max_supported_opsets__</span></code></p>
</section>
</section>
<section id="type-conversion">
<h2><a class="toc-backref" href="#id13">Type conversion</a><a class="headerlink" href="#type-conversion" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="../mlprodict/onnx_conv/convert.html#mlprodict.onnx_conv.convert.guess_initial_types" title="mlprodict.onnx_conv.convert.guess_initial_types"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_conv.convert.guess_initial_types</span></code></a> (<em>X</em>, <em>initial_types</em>)</p>
<blockquote>
<div><p>Guesses initial types from an array or a dataframe.</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/onnx_tools/onnx2py_helper.html#mlprodict.onnx_tools.onnx2py_helper.guess_numpy_type_from_string" title="mlprodict.onnx_tools.onnx2py_helper.guess_numpy_type_from_string"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.onnx2py_helper.guess_numpy_type_from_string</span></code></a> (<em>name</em>)</p>
<blockquote>
<div><p>Converts a string (such as <cite>‘float’</cite>) into a
numpy dtype.</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/onnx_tools/onnx2py_helper.html#mlprodict.onnx_tools.onnx2py_helper.guess_numpy_type_from_dtype" title="mlprodict.onnx_tools.onnx2py_helper.guess_numpy_type_from_dtype"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.onnx2py_helper.guess_numpy_type_from_dtype</span></code></a> (<em>dt</em>)</p>
<blockquote>
<div><p>Converts a string (such as <cite>‘dtype(float32)’</cite>) into a
numpy dtype.</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/onnx_tools/onnx2py_helper.html#mlprodict.onnx_tools.onnx2py_helper.guess_proto_dtype" title="mlprodict.onnx_tools.onnx2py_helper.guess_proto_dtype"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.onnx2py_helper.guess_proto_dtype</span></code></a> (<em>dtype</em>)</p>
<blockquote>
<div><p>Guesses the ONNX dtype given a numpy dtype.</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/onnx_tools/onnx2py_helper.html#mlprodict.onnx_tools.onnx2py_helper.guess_proto_dtype_name" title="mlprodict.onnx_tools.onnx2py_helper.guess_proto_dtype_name"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.onnx2py_helper.guess_proto_dtype_name</span></code></a> (<em>onnx_dtype</em>)</p>
<blockquote>
<div><p>Returns a string equivalent to <cite>onnx_dtype</cite>.</p>
</div></blockquote>
<p><a class="reference internal" href="../mlprodict/onnx_tools/onnx2py_helper.html#mlprodict.onnx_tools.onnx2py_helper.guess_dtype" title="mlprodict.onnx_tools.onnx2py_helper.guess_dtype"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.onnx2py_helper.guess_dtype</span></code></a> (<em>proto_type</em>)</p>
<blockquote>
<div><p>Converts a proto type into a <a class="reference external" href="https://www.numpy.org/">numpy</a> type.</p>
</div></blockquote>
<p>In <a class="reference external" href="https://github.com/onnx/sklearn-onnx">sklearn-onnx</a>:</p>
<ul class="simple">
<li><p><cite>skl2onnx.algebra.type_helper.guess_initial_types</cite></p></li>
<li><p><cite>skl2onnx.common.data_types.guess_data_type</cite></p></li>
<li><p><cite>skl2onnx.common.data_types.guess_numpy_type</cite></p></li>
<li><p><cite>skl2onnx.common.data_types.guess_proto_type</cite></p></li>
<li><p><cite>skl2onnx.common.data_types.guess_tensor_type</cite></p></li>
<li><p><cite>skl2onnx.common.data_types._guess_type_proto</cite></p></li>
<li><p><cite>skl2onnx.common.data_types._guess_numpy_type</cite></p></li>
</ul>
<p>The last example summarizes all the possibilities.</p>
<p>&lt;&lt;&lt;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">from</span> <span class="nn">onnx</span> <span class="kn">import</span> <span class="n">TensorProto</span>

<span class="kn">from</span> <span class="nn">skl2onnx.algebra.type_helper</span> <span class="kn">import</span> <span class="n">guess_initial_types</span>
<span class="kn">from</span> <span class="nn">skl2onnx.common.data_types</span> <span class="kn">import</span> <span class="n">guess_data_type</span>
<span class="kn">from</span> <span class="nn">skl2onnx.common.data_types</span> <span class="kn">import</span> <span class="n">guess_numpy_type</span>
<span class="kn">from</span> <span class="nn">skl2onnx.common.data_types</span> <span class="kn">import</span> <span class="n">guess_proto_type</span>
<span class="kn">from</span> <span class="nn">skl2onnx.common.data_types</span> <span class="kn">import</span> <span class="n">guess_tensor_type</span>
<span class="kn">from</span> <span class="nn">skl2onnx.common.data_types</span> <span class="kn">import</span> <span class="n">_guess_type_proto</span>
<span class="kn">from</span> <span class="nn">skl2onnx.common.data_types</span> <span class="kn">import</span> <span class="n">_guess_numpy_type</span>
<span class="kn">from</span> <span class="nn">skl2onnx.common.data_types</span> <span class="kn">import</span> <span class="n">DoubleTensorType</span>

<span class="kn">from</span> <span class="nn">mlprodict.onnx_conv.convert</span> <span class="kn">import</span> <span class="n">guess_initial_types</span> <span class="k">as</span> <span class="n">guess_initial_types_mlprodict</span>
<span class="kn">from</span> <span class="nn">mlprodict.onnx_tools.onnx2py_helper</span> <span class="kn">import</span> <span class="n">guess_numpy_type_from_string</span>
<span class="kn">from</span> <span class="nn">mlprodict.onnx_tools.onnx2py_helper</span> <span class="kn">import</span> <span class="n">guess_numpy_type_from_dtype</span>
<span class="kn">from</span> <span class="nn">mlprodict.onnx_tools.onnx2py_helper</span> <span class="kn">import</span> <span class="n">guess_proto_dtype</span>
<span class="kn">from</span> <span class="nn">mlprodict.onnx_tools.onnx2py_helper</span> <span class="kn">import</span> <span class="n">guess_proto_dtype_name</span>
<span class="kn">from</span> <span class="nn">mlprodict.onnx_tools.onnx2py_helper</span> <span class="kn">import</span> <span class="n">guess_dtype</span>


<span class="k">def</span> <span class="nf">guess_initial_types0</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">guess_initial_types</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">t</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">guess_initial_types1</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">guess_initial_types</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="p">[(</span><span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">)])</span>


<span class="k">def</span> <span class="nf">guess_initial_types_mlprodict0</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">guess_initial_types_mlprodict</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">t</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">guess_initial_types_mlprodict1</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">guess_initial_types_mlprodict</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="p">[(</span><span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="n">t</span><span class="p">)])</span>


<span class="k">def</span> <span class="nf">_guess_type_proto1</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_guess_type_proto</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>


<span class="k">def</span> <span class="nf">_guess_numpy_type1</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_guess_numpy_type</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>


<span class="n">fcts</span> <span class="o">=</span> <span class="p">[</span><span class="n">guess_initial_types0</span><span class="p">,</span> <span class="n">guess_initial_types1</span><span class="p">,</span>
        <span class="n">guess_data_type</span><span class="p">,</span> <span class="n">guess_numpy_type</span><span class="p">,</span>
        <span class="n">guess_proto_type</span><span class="p">,</span> <span class="n">guess_tensor_type</span><span class="p">,</span>
        <span class="n">_guess_type_proto1</span><span class="p">,</span>
        <span class="n">_guess_numpy_type1</span><span class="p">,</span>
        <span class="n">guess_initial_types_mlprodict0</span><span class="p">,</span>
        <span class="n">guess_initial_types_mlprodict1</span><span class="p">,</span>
        <span class="n">guess_numpy_type_from_string</span><span class="p">,</span>
        <span class="n">guess_numpy_type_from_dtype</span><span class="p">,</span>
        <span class="n">guess_proto_dtype_name</span><span class="p">,</span> <span class="n">guess_dtype</span><span class="p">]</span>

<span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="s1">&#39;double&#39;</span><span class="p">,</span> <span class="s1">&#39;tensor(double)&#39;</span><span class="p">,</span>
          <span class="n">DoubleTensorType</span><span class="p">([</span><span class="kc">None</span><span class="p">,</span> <span class="mi">4</span><span class="p">]),</span>
          <span class="n">TensorProto</span><span class="o">.</span><span class="n">DOUBLE</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;---SUCCESS------------&quot;</span><span class="p">)</span>
<span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fcts</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(</span><span class="si">%r</span><span class="s2">) -&gt; </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">r</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(</span><span class="si">%r</span><span class="s2">) -&gt; </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;---ERRORS-------------&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">errors</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
<p>&gt;&gt;&gt;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    ---SUCCESS------------
    
    guess_initial_types0(&lt;class &#39;numpy.float64&#39;&gt;) -&gt; [(&#39;X&#39;, DoubleTensorType(shape=[None, 2]))]
    guess_initial_types0(&lt;class &#39;float&#39;&gt;) -&gt; [(&#39;X&#39;, DoubleTensorType(shape=[None, 2]))]
    guess_initial_types0(&#39;double&#39;) -&gt; [(&#39;X&#39;, DoubleTensorType(shape=[None, 2]))]
    
    guess_initial_types1(&lt;class &#39;numpy.float64&#39;&gt;) -&gt; [(&#39;X&#39;, &lt;class &#39;numpy.float64&#39;&gt;)]
    guess_initial_types1(&lt;class &#39;float&#39;&gt;) -&gt; [(&#39;X&#39;, &lt;class &#39;float&#39;&gt;)]
    guess_initial_types1(&#39;double&#39;) -&gt; [(&#39;X&#39;, &#39;double&#39;)]
    guess_initial_types1(&#39;tensor(double)&#39;) -&gt; [(&#39;X&#39;, &#39;tensor(double)&#39;)]
    guess_initial_types1(DoubleTensorType(shape=[None, 4])) -&gt; [(&#39;X&#39;, DoubleTensorType(shape=[None, 4]))]
    guess_initial_types1(11) -&gt; [(&#39;X&#39;, 11)]
    
    guess_data_type(&#39;tensor(double)&#39;) -&gt; DoubleTensorType(shape=[])
    
    guess_numpy_type(&lt;class &#39;numpy.float64&#39;&gt;) -&gt; &lt;class &#39;numpy.float64&#39;&gt;
    guess_numpy_type(DoubleTensorType(shape=[None, 4])) -&gt; &lt;class &#39;numpy.float64&#39;&gt;
    
    guess_proto_type(DoubleTensorType(shape=[None, 4])) -&gt; 11
    
    guess_tensor_type(DoubleTensorType(shape=[None, 4])) -&gt; DoubleTensorType(shape=[])
    
    _guess_type_proto1(11) -&gt; DoubleTensorType(shape=[None, 4])
    
    _guess_numpy_type1(&lt;class &#39;numpy.float64&#39;&gt;) -&gt; DoubleTensorType(shape=[None, 4])
    
    guess_initial_types_mlprodict0(&lt;class &#39;numpy.float64&#39;&gt;) -&gt; [(&#39;X&#39;, DoubleTensorType(shape=[None, 2]))]
    guess_initial_types_mlprodict0(&lt;class &#39;float&#39;&gt;) -&gt; [(&#39;X&#39;, DoubleTensorType(shape=[None, 2]))]
    guess_initial_types_mlprodict0(&#39;double&#39;) -&gt; [(&#39;X&#39;, DoubleTensorType(shape=[None, 2]))]
    
    guess_initial_types_mlprodict1(&lt;class &#39;numpy.float64&#39;&gt;) -&gt; [(&#39;X&#39;, &lt;class &#39;numpy.float64&#39;&gt;)]
    guess_initial_types_mlprodict1(&lt;class &#39;float&#39;&gt;) -&gt; [(&#39;X&#39;, &lt;class &#39;float&#39;&gt;)]
    guess_initial_types_mlprodict1(&#39;double&#39;) -&gt; [(&#39;X&#39;, &#39;double&#39;)]
    guess_initial_types_mlprodict1(&#39;tensor(double)&#39;) -&gt; [(&#39;X&#39;, &#39;tensor(double)&#39;)]
    guess_initial_types_mlprodict1(DoubleTensorType(shape=[None, 4])) -&gt; [(&#39;X&#39;, DoubleTensorType(shape=[None, 4]))]
    guess_initial_types_mlprodict1(11) -&gt; [(&#39;X&#39;, 11)]
    
    guess_numpy_type_from_string(&#39;double&#39;) -&gt; &lt;class &#39;numpy.float64&#39;&gt;
    
    guess_numpy_type_from_dtype(&lt;class &#39;numpy.float64&#39;&gt;) -&gt; &lt;class &#39;numpy.float64&#39;&gt;
    guess_numpy_type_from_dtype(&lt;class &#39;float&#39;&gt;) -&gt; &lt;class &#39;numpy.float64&#39;&gt;
    guess_numpy_type_from_dtype(&#39;double&#39;) -&gt; &lt;class &#39;numpy.float64&#39;&gt;
    
    guess_proto_dtype_name(11) -&gt; &#39;TensorProto.DOUBLE&#39;
    
    guess_dtype(11) -&gt; &lt;class &#39;numpy.float64&#39;&gt;
    
    ---ERRORS-------------
    
    guess_initial_types0(&#39;tensor(double)&#39;) -&gt; TypeError(&quot;data type &#39;tensor(double)&#39; not understood&quot;)
    guess_initial_types0(DoubleTensorType(shape=[None, 4])) -&gt; TypeError(&quot;Cannot interpret &#39;DoubleTensorType(shape=[None, 4])&#39; as a data type&quot;)
    guess_initial_types0(11) -&gt; TypeError(&quot;Cannot interpret &#39;11&#39; as a data type&quot;)
    
    
    guess_data_type(&lt;class &#39;numpy.float64&#39;&gt;) -&gt; NotImplementedError(&quot;Unsupported data_type &lt;attribute &#39;dtype&#39; of &#39;numpy.generic&#39; objects&gt; (type=&lt;class &#39;getset_descriptor&#39;&gt;). You may raise an issue at https://github.com/onnx/sklearn-onnx/issues.&quot;)
    guess_data_type(&lt;class &#39;float&#39;&gt;) -&gt; TypeError(&quot;Type &lt;class &#39;type&#39;&gt; cannot be converted into a DataType. You may raise an issue at https://github.com/onnx/sklearn-onnx/issues.&quot;)
    guess_data_type(&#39;double&#39;) -&gt; NotImplementedError(&quot;Unsupported data_type &#39;double&#39;. You may raise an issue at https://github.com/onnx/sklearn-onnx/issues.&quot;)
    guess_data_type(DoubleTensorType(shape=[None, 4])) -&gt; TypeError(&quot;Type &lt;class &#39;onnxconverter_common.data_types.DoubleTensorType&#39;&gt; cannot be converted into a DataType. You may raise an issue at https://github.com/onnx/sklearn-onnx/issues.&quot;)
    guess_data_type(11) -&gt; TypeError(&quot;Type &lt;class &#39;int&#39;&gt; cannot be converted into a DataType. You may raise an issue at https://github.com/onnx/sklearn-onnx/issues.&quot;)
    
    guess_numpy_type(&lt;class &#39;float&#39;&gt;) -&gt; NotImplementedError(&quot;Unsupported data_type &#39;&lt;class &#39;float&#39;&gt;&#39;.&quot;)
    guess_numpy_type(&#39;double&#39;) -&gt; NotImplementedError(&quot;Unsupported data_type &#39;double&#39;.&quot;)
    guess_numpy_type(&#39;tensor(double)&#39;) -&gt; NotImplementedError(&quot;Unsupported data_type &#39;tensor(double)&#39;.&quot;)
    guess_numpy_type(11) -&gt; NotImplementedError(&quot;Unsupported data_type &#39;11&#39;.&quot;)
    
    guess_proto_type(&lt;class &#39;numpy.float64&#39;&gt;) -&gt; NotImplementedError(&quot;Unsupported data_type &#39;&lt;class &#39;numpy.float64&#39;&gt;&#39;.&quot;)
    guess_proto_type(&lt;class &#39;float&#39;&gt;) -&gt; NotImplementedError(&quot;Unsupported data_type &#39;&lt;class &#39;float&#39;&gt;&#39;.&quot;)
    guess_proto_type(&#39;double&#39;) -&gt; NotImplementedError(&quot;Unsupported data_type &#39;double&#39;.&quot;)
    guess_proto_type(&#39;tensor(double)&#39;) -&gt; NotImplementedError(&quot;Unsupported data_type &#39;tensor(double)&#39;.&quot;)
    guess_proto_type(11) -&gt; NotImplementedError(&quot;Unsupported data_type &#39;11&#39;.&quot;)
    
    guess_tensor_type(&lt;class &#39;numpy.float64&#39;&gt;) -&gt; TypeError(&quot;data_type is not a tensor type but &#39;&lt;class &#39;type&#39;&gt;&#39;.&quot;)
    guess_tensor_type(&lt;class &#39;float&#39;&gt;) -&gt; TypeError(&quot;data_type is not a tensor type but &#39;&lt;class &#39;type&#39;&gt;&#39;.&quot;)
    guess_tensor_type(&#39;double&#39;) -&gt; TypeError(&quot;data_type is not a tensor type but &#39;&lt;class &#39;str&#39;&gt;&#39;.&quot;)
    guess_tensor_type(&#39;tensor(double)&#39;) -&gt; TypeError(&quot;data_type is not a tensor type but &#39;&lt;class &#39;str&#39;&gt;&#39;.&quot;)
    guess_tensor_type(11) -&gt; TypeError(&quot;data_type is not a tensor type but &#39;&lt;class &#39;int&#39;&gt;&#39;.&quot;)
    
    _guess_type_proto1(&lt;class &#39;numpy.float64&#39;&gt;) -&gt; NotImplementedError(&quot;Unsupported data_type &#39;&lt;class &#39;numpy.float64&#39;&gt;&#39;. You may raise an issue at https://github.com/onnx/sklearn-onnx/issues.&quot;)
    _guess_type_proto1(&lt;class &#39;float&#39;&gt;) -&gt; NotImplementedError(&quot;Unsupported data_type &#39;&lt;class &#39;float&#39;&gt;&#39;. You may raise an issue at https://github.com/onnx/sklearn-onnx/issues.&quot;)
    _guess_type_proto1(&#39;double&#39;) -&gt; NotImplementedError(&quot;Unsupported data_type &#39;double&#39;. You may raise an issue at https://github.com/onnx/sklearn-onnx/issues.&quot;)
    _guess_type_proto1(&#39;tensor(double)&#39;) -&gt; NotImplementedError(&quot;Unsupported data_type &#39;tensor(double)&#39;. You may raise an issue at https://github.com/onnx/sklearn-onnx/issues.&quot;)
    _guess_type_proto1(DoubleTensorType(shape=[None, 4])) -&gt; NotImplementedError(&quot;Unsupported data_type &#39;DoubleTensorType(shape=[None, 4])&#39;. You may raise an issue at https://github.com/onnx/sklearn-onnx/issues.&quot;)
    
    _guess_numpy_type1(&lt;class &#39;float&#39;&gt;) -&gt; NotImplementedError(&quot;Unsupported data_type &lt;class &#39;float&#39;&gt; (type=&lt;class &#39;type&#39;&gt;). You may raise an issue at https://github.com/onnx/sklearn-onnx/issues.&quot;)
    _guess_numpy_type1(&#39;double&#39;) -&gt; NotImplementedError(&quot;Unsupported data_type &#39;double&#39; (type=&lt;class &#39;str&#39;&gt;). You may raise an issue at https://github.com/onnx/sklearn-onnx/issues.&quot;)
    _guess_numpy_type1(&#39;tensor(double)&#39;) -&gt; NotImplementedError(&quot;Unsupported data_type &#39;tensor(double)&#39; (type=&lt;class &#39;str&#39;&gt;). You may raise an issue at https://github.com/onnx/sklearn-onnx/issues.&quot;)
    _guess_numpy_type1(DoubleTensorType(shape=[None, 4])) -&gt; NotImplementedError(&quot;Unsupported data_type DoubleTensorType(shape=[None, 4]) (type=&lt;class &#39;onnxconverter_common.data_types.DoubleTensorType&#39;&gt;). You may raise an issue at https://github.com/onnx/sklearn-onnx/issues.&quot;)
    _guess_numpy_type1(11) -&gt; NotImplementedError(&quot;Unsupported data_type 11 (type=&lt;class &#39;int&#39;&gt;). You may raise an issue at https://github.com/onnx/sklearn-onnx/issues.&quot;)
    
    guess_initial_types_mlprodict0(&#39;tensor(double)&#39;) -&gt; TypeError(&quot;data type &#39;tensor(double)&#39; not understood&quot;)
    guess_initial_types_mlprodict0(DoubleTensorType(shape=[None, 4])) -&gt; TypeError(&quot;Cannot interpret &#39;DoubleTensorType(shape=[None, 4])&#39; as a data type&quot;)
    guess_initial_types_mlprodict0(11) -&gt; TypeError(&quot;Cannot interpret &#39;11&#39; as a data type&quot;)
    
    
    guess_numpy_type_from_string(&lt;class &#39;numpy.float64&#39;&gt;) -&gt; ValueError(&quot;Unable to guess numpy dtype from &lt;class &#39;numpy.float64&#39;&gt;.&quot;)
    guess_numpy_type_from_string(&lt;class &#39;float&#39;&gt;) -&gt; ValueError(&quot;Unable to guess numpy dtype from &lt;class &#39;float&#39;&gt;.&quot;)
    guess_numpy_type_from_string(&#39;tensor(double)&#39;) -&gt; ValueError(&quot;Unable to guess numpy dtype from &#39;tensor(double)&#39;.&quot;)
    guess_numpy_type_from_string(DoubleTensorType(shape=[None, 4])) -&gt; ValueError(&#39;Unable to guess numpy dtype from DoubleTensorType(shape=[None, 4]).&#39;)
    guess_numpy_type_from_string(11) -&gt; ValueError(&#39;Unable to guess numpy dtype from 11.&#39;)
    
    guess_numpy_type_from_dtype(&#39;tensor(double)&#39;) -&gt; ValueError(&quot;Unable to guess numpy dtype from &#39;tensor(double)&#39;.&quot;)
    guess_numpy_type_from_dtype(DoubleTensorType(shape=[None, 4])) -&gt; ValueError(&#39;Unable to guess numpy dtype from DoubleTensorType(shape=[None, 4]).&#39;)
    guess_numpy_type_from_dtype(11) -&gt; ValueError(&#39;Unable to guess numpy dtype from 11.&#39;)
    
    guess_proto_dtype_name(&lt;class &#39;numpy.float64&#39;&gt;) -&gt; RuntimeError(&quot;Unable to guess type for dtype=&lt;class &#39;numpy.float64&#39;&gt;.&quot;)
    guess_proto_dtype_name(&lt;class &#39;float&#39;&gt;) -&gt; RuntimeError(&quot;Unable to guess type for dtype=&lt;class &#39;float&#39;&gt;.&quot;)
    guess_proto_dtype_name(&#39;double&#39;) -&gt; RuntimeError(&#39;Unable to guess type for dtype=double.&#39;)
    guess_proto_dtype_name(&#39;tensor(double)&#39;) -&gt; RuntimeError(&#39;Unable to guess type for dtype=tensor(double).&#39;)
    guess_proto_dtype_name(DoubleTensorType(shape=[None, 4])) -&gt; RuntimeError(&#39;Unable to guess type for dtype=DoubleTensorType(shape=[None, 4]).&#39;)
    
    guess_dtype(&lt;class &#39;numpy.float64&#39;&gt;) -&gt; ValueError(&quot;Unable to convert proto_type &lt;class &#39;numpy.float64&#39;&gt; to numpy type.&quot;)
    guess_dtype(&lt;class &#39;float&#39;&gt;) -&gt; ValueError(&quot;Unable to convert proto_type &lt;class &#39;float&#39;&gt; to numpy type.&quot;)
    guess_dtype(&#39;double&#39;) -&gt; ValueError(&#39;Unable to convert proto_type double to numpy type.&#39;)
    guess_dtype(&#39;tensor(double)&#39;) -&gt; ValueError(&#39;Unable to convert proto_type tensor(double) to numpy type.&#39;)
    guess_dtype(DoubleTensorType(shape=[None, 4])) -&gt; ValueError(&#39;Unable to convert proto_type DoubleTensorType(shape=[None, 4]) to numpy type.&#39;)
</pre></div>
</div>
</section>
<section id="skl2onnx">
<h2><a class="toc-backref" href="#id14">skl2onnx</a><a class="headerlink" href="#skl2onnx" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="../mlprodict/onnx_tools/exports/skl2onnx_helper.html#mlprodict.onnx_tools.exports.skl2onnx_helper.add_onnx_graph" title="mlprodict.onnx_tools.exports.skl2onnx_helper.add_onnx_graph"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlprodict.onnx_tools.exports.skl2onnx_helper.add_onnx_graph</span></code></a> (<em>scope</em>, <em>operator</em>, <em>container</em>, <em>onx</em>)</p>
<blockquote>
<div><p>Adds a whole ONNX graph to an existing one following
<a class="reference external" href="https://github.com/onnx/sklearn-onnx">skl2onnx</a> API assuming this ONNX graph implements
an <a class="reference external" href="http://onnx.ai/sklearn-onnx/api_summary.html?highlight=operator#skl2onnx.common._topology.Operator">operator</a>.</p>
</div></blockquote>
</section>
</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="validation.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Validation</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="cc_grammar.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Former Experiments</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
    <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022, Xavier Dupré.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.4.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>