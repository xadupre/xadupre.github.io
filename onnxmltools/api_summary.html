<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">

  <title>API Summary</title>

  <link rel="stylesheet" href="_static/sphinx-modern-theme-modified.css" type="text/css"/>
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery.css" type="text/css" />
</head>
<body>
<div class="container">
  <div class="row" style="margin-top: 1rem;">
    <div id="sidebar" class="col-xs-12 col-sm-3">
      <a href="index.html">
        <img style="margin-bottom: 0.5rem;" class="img-fluid" src="_static/ONNXMLTools_logo_main.png"/>
      </a>
      <div id="searchbox" style="display: none" role="search">
        <form class="form-inline" action="search.html" method="get">
          <div class="form-group">
            <label class="sr-only" for="searchInput">Search</label>
            <input type="text" class="form-control" name="q" id="searchInput" placeholder="Search">
          </div>
          <button type="submit" class="btn btn-secondary" style="display:none">Go</button>
          <input type="hidden" name="check_keywords" value="yes"/>
          <input type="hidden" name="area" value="default"/>
        </form>
      </div>

      <hr>

        <div id="toc">
        <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#step-1-train-a-model-using-your-favorite-framework">Step 1: Train a model using your favorite framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#step-2-convert-or-export-the-model-into-onnx-format">Step 2: Convert or export the model into ONNX format</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#step-3-load-and-run-the-model-using-onnx-runtime">Step 3: Load and run the model using ONNX Runtime</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API Summary</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#converters">Converters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#utils">Utils</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="auto_examples/index.html">Gallery of examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="auto_examples/plot_backend.html">ONNX Runtime Backend for ONNX</a></li>
<li class="toctree-l2"><a class="reference internal" href="auto_examples/plot_pipeline.html">Draw a pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="auto_examples/plot_metadata.html">Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="auto_examples/plot_common_errors.html">Common errors with onnxruntime</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">Tests, Dependencies, Contribute</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tests.html#test-all-existing-converters">Test all existing converters</a></li>
<li class="toctree-l2"><a class="reference internal" href="tests.html#add-a-new-converter">Add a new converter</a></li>
</ul>
</li>
</ul>

        </div>
    </div>
    <div class="col-xs-12 col-sm-9">
      <div class="section" id="api-summary">
<h1>API Summary<a class="headerlink" href="#api-summary" title="Permalink to this headline">¶</a></h1>
<p>Summary of public functions and classes exposed
in <em>onnxmltools</em>.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#converters" id="id1">Converters</a></li>
<li><a class="reference internal" href="#utils" id="id2">Utils</a></li>
</ul>
</div>
<div class="section" id="converters">
<h2><a class="toc-backref" href="#id1">Converters</a><a class="headerlink" href="#converters" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="onnxmltools.convert.coreml.convert">
<code class="descclassname">onnxmltools.convert.coreml.</code><code class="descname">convert</code><span class="sig-paren">(</span><em>model</em>, <em>name=None</em>, <em>initial_types=None</em>, <em>doc_string=''</em>, <em>target_opset=None</em>, <em>targeted_onnx='1.4.1'</em>, <em>custom_conversion_functions=None</em>, <em>custom_shape_calculators=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onnxmltools/convert/coreml/convert.html#convert"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onnxmltools.convert.coreml.convert" title="Permalink to this definition">¶</a></dt>
<dd><p>This function converts the specified CoreML model into its ONNX counterpart. Some information such as the produced
ONNX model name can be specified.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>model</strong> – A <a class="reference external" href="https://apple.github.io/coremltools/coremlspecification/sections/Model.html#model">CoreML model</a> or
a CoreML MLModel object</li>
<li><strong>initial_types</strong> – A list providing some types for some root variables. Each element is a tuple of a variable
name and a type defined in <em>data_types.py</em>.</li>
<li><strong>name</strong> – The name of the graph (type: GraphProto) in the produced ONNX model (type: ModelProto)</li>
<li><strong>doc_string</strong> – A string attached onto the produced ONNX model</li>
<li><strong>target_opset</strong> – number, for example, 7 for ONNX 1.2, and 8 for ONNX 1.3.</li>
<li><strong>targeted_onnx</strong> – A string (for example, ‘1.1.2’ and ‘1.2’) used to specify the targeted ONNX version of the
produced model. If ONNXMLTools cannot find a compatible ONNX python package, an error may be thrown.</li>
<li><strong>custom_conversion_functions</strong> – a dictionary for specifying the user customized conversion function</li>
<li><strong>custom_shape_calculators</strong> – a dictionary for specifying the user customized shape calculator</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">An ONNX model (type: ModelProto) which is equivalent to the input CoreML model</p>
</td>
</tr>
</tbody>
</table>
<p>Example of initial types:
Assume that ‘A’ and ‘B’ are two root variable names used in the CoreML 
model you want to convert. We can specify their types via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">onnxmltools.convert.common.data_types</span> <span class="k">import</span> <span class="n">FloatTensorType</span>
<span class="n">initial_type</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="n">FloatTensorType</span><span class="p">([</span><span class="mi">40</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])),</span> 
                <span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="n">FloatTensorType</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]))]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="onnxmltools.convert.lightgbm.convert">
<code class="descclassname">onnxmltools.convert.lightgbm.</code><code class="descname">convert</code><span class="sig-paren">(</span><em>model</em>, <em>name=None</em>, <em>initial_types=None</em>, <em>doc_string=''</em>, <em>target_opset=None</em>, <em>targeted_onnx='1.4.1'</em>, <em>custom_conversion_functions=None</em>, <em>custom_shape_calculators=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onnxmltools/convert/lightgbm/convert.html#convert"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onnxmltools.convert.lightgbm.convert" title="Permalink to this definition">¶</a></dt>
<dd><p>This function produces an equivalent ONNX model of the given lightgbm model.
The supported lightgbm modules are listed below.</p>
<ul class="simple">
<li><a class="reference external" href="http://lightgbm.readthedocs.io/en/latest/Python-API.html#lightgbm.LGBMClassifier">LGBMClassifiers</a></li>
<li><a class="reference external" href="http://lightgbm.readthedocs.io/en/latest/Python-API.html#lightgbm.LGBMRegressor">LGBMRegressor</a></li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>model</strong> – A lightgbm model</li>
<li><strong>initial_types</strong> – a python list. Each element is a tuple of a variable name and a type defined in data_types.py</li>
<li><strong>name</strong> – The name of the graph (type: GraphProto) in the produced ONNX model (type: ModelProto)</li>
<li><strong>doc_string</strong> – A string attached onto the produced ONNX model</li>
<li><strong>target_opset</strong> – number, for example, 7 for ONNX 1.2, and 8 for ONNX 1.3.</li>
<li><strong>targeted_onnx</strong> – A string (for example, ‘1.1.2’ and ‘1.2’) used to specify the targeted ONNX version of the
produced model. If ONNXMLTools cannot find a compatible ONNX python package, an error may be thrown.</li>
<li><strong>custom_conversion_functions</strong> – a dictionary for specifying the user customized conversion function</li>
<li><strong>custom_shape_calculators</strong> – a dictionary for specifying the user customized shape calculator</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">An ONNX model (type: ModelProto) which is equivalent to the input lightgbm model</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="utils">
<h2><a class="toc-backref" href="#id2">Utils</a><a class="headerlink" href="#utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="onnxmltools.utils.visualize_model">
<code class="descclassname">onnxmltools.utils.</code><code class="descname">visualize_model</code><span class="sig-paren">(</span><em>onnx_model</em>, <em>open_browser=True</em>, <em>dest='index.html'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onnxmltools/utils/visualize.html#visualize_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onnxmltools.utils.visualize_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a graph visualization of an ONNX protobuf model.
It creates a SVG graph with <em>d3.js</em> and stores it into a file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>model</strong> – ONNX model (protobuf object)</li>
<li><strong>open_browser</strong> – opens the browser</li>
<li><strong>dest</strong> – destination file</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">onnxmltools.utils</span> <span class="k">import</span> <span class="n">visualize_model</span>
<span class="n">visualize_model</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="onnxmltools.utils.dump_data_and_model">
<code class="descclassname">onnxmltools.utils.</code><code class="descname">dump_data_and_model</code><span class="sig-paren">(</span><em>data</em>, <em>model</em>, <em>onnx=None</em>, <em>basename='model'</em>, <em>folder=None</em>, <em>inputs=None</em>, <em>backend='onnxruntime'</em>, <em>context=None</em>, <em>allow_failure=None</em>, <em>verbose=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/onnxmltools/utils/tests_helper.html#dump_data_and_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#onnxmltools.utils.dump_data_and_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves data with pickle, saves the model with pickle and <em>onnx</em>,
runs and saves the predictions for the given model.
This function is used to test a backend (runtime) for <em>onnx</em>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> – any kind of data</li>
<li><strong>model</strong> – any model</li>
<li><strong>onnx</strong> – <em>onnx</em> model or <em>None</em> to use <em>onnxmltools</em> to convert it
only if the model accepts one float vector</li>
<li><strong>basemodel</strong> – three files are writen <code class="docutils literal notranslate"><span class="pre">&lt;basename&gt;.data.pkl</span></code>,
<code class="docutils literal notranslate"><span class="pre">&lt;basename&gt;.model.pkl</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;basename&gt;.model.onnx</span></code></li>
<li><strong>folder</strong> – files are written in this folder,
it is created if it does not exist, if <em>folder</em> is None,
it looks first in environment variable <code class="docutils literal notranslate"><span class="pre">ONNXTESTDUMP</span></code>,
otherwise, it is placed into <code class="docutils literal notranslate"><span class="pre">'tests'</span></code>.</li>
<li><strong>inputs</strong> – standard type or specific one if specified, only used is
parameter <em>onnx</em> is None</li>
<li><strong>backend</strong> – backend used to compare expected output and runtime output.
Two options are currently supported: None for no test,
<cite>‘onnxruntime’</cite> to use module <em>onnxruntime</em>.</li>
<li><strong>context</strong> – used if the model contains a custom operator such
as a custom Keras function…</li>
<li><strong>allow_failure</strong> – None to raise an exception if comparison fails
for the backends, otherwise a string which is then evaluated to check
whether or not the test can fail, example:
<code class="docutils literal notranslate"><span class="pre">&quot;StrictVersion(onnx.__version__)</span> <span class="pre">&lt;</span> <span class="pre">StrictVersion('1.3.0')&quot;</span></code></li>
<li><strong>verbose</strong> – additional information</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the created files</p>
</td>
</tr>
</tbody>
</table>
<p>Some convention for the name,
<em>Bin</em> for a binary classifier, <em>Mcl</em> for a multiclass
classifier, <em>Reg</em> for a regressor, <em>MRg</em> for a multi-regressor.
The name can contain some flags. Expected outputs refer to the
outputs computed with the original library, computed outputs
refer to the outputs computed with a ONNX runtime.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">-CannotLoad</span></code>: the model can be converted but the runtime cannot load it</li>
<li><code class="docutils literal notranslate"><span class="pre">-Dec3</span></code>: compares expected and computed outputs up to 3 decimals (5 by default)</li>
<li><code class="docutils literal notranslate"><span class="pre">-Dec4</span></code>: compares expected and computed outputs up to 4 decimals (5 by default)</li>
<li><code class="docutils literal notranslate"><span class="pre">-NoProb</span></code>: The original models computed probabilites for two classes <em>size=(N, 2)</em>
but the runtime produces a vector of size <em>N</em>, the test will compare the second column
to the column</li>
<li><code class="docutils literal notranslate"><span class="pre">-OneOff</span></code>: the ONNX runtime cannot computed the prediction for several inputs,
it must be called for each of them
and computed output.</li>
<li><code class="docutils literal notranslate"><span class="pre">-Out0</span></code>: only compares the first output on both sides</li>
<li><code class="docutils literal notranslate"><span class="pre">-Reshape</span></code>: merges all outputs into one single vector and resizes it before comparing</li>
<li><code class="docutils literal notranslate"><span class="pre">-SkipDim1</span></code>: before comparing expected and computed output,
arrays with a shape like <em>(2, 1, 2)</em> becomes <em>(2, 2)</em></li>
</ul>
<p>If the <em>backend</em> is not None, the function either raises an exception
if the comparison between the expected outputs and the backend outputs
fails or it saves the backend output and adds it to the results.</p>
</dd></dl>

</div>
</div>

    </div>
  </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js"
        integrity="sha384-THPy051/pYDQGanwU6poAc/hOdQxjnOEXzbT+OuUAFqNqFjL+4IGLBgCJC3ZOShY"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.2.0/js/tether.min.js"
        integrity="sha384-Plbmg8JY28KFelvJVai01l8WyZzrYWG825m+cZ0eDDS1f7d/js6ikvy1+X+guPIB"
        crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.3/js/bootstrap.min.js"
        integrity="sha384-ux8v3A6CPtOTqOzMKiuo3d/DomGaaClxFYdCu2HPMBEkf6x2xiDyJ7gkXU0MWwaD"
        crossorigin="anonymous"></script>
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/0.6.0/lunr.min.js"></script>
<script src="_static/searchtools.js"></script>
<script>$('#searchbox').show(0)</script>
</body>
</html>